

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/xiaowo.jpg">
  <link rel="icon" href="/img/xiaowo.jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="UncleBob">
  <meta name="keywords" content="">
  
    <meta name="description" content="这篇文章是 UncleBob 大一的程序设计基础笔记，语言为 C++。">
<meta property="og:type" content="article">
<meta property="og:title" content="程序设计基础笔记">
<meta property="og:url" content="http://imtdof.github.io/2024/10/31/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E5%9F%BA%E7%A1%80%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="UncleBob的个人博客">
<meta property="og:description" content="这篇文章是 UncleBob 大一的程序设计基础笔记，语言为 C++。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://imtdof.github.io/img/cs.jpg">
<meta property="article:published_time" content="2024-10-31T10:21:17.000Z">
<meta property="article:modified_time" content="2025-04-06T11:33:34.072Z">
<meta property="article:author" content="UncleBob">
<meta property="article:tag" content="程序设计">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://imtdof.github.io/img/cs.jpg">
  
  
  
  <title>程序设计基础笔记 - UncleBob的个人博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"imtdof.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>UncleBob的博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/cs.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="程序设计基础笔记"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-10-31 18:21" pubdate>
          2024年10月31日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          20k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          165 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">程序设计基础笔记</h1>
            
            
              <div class="markdown-body">
                
                <h2 id="1-入门知识">1.入门知识</h2>
<h3 id="程序的基本结构和程序的输出">程序的基本结构和程序的输出</h3>
<p>我们使用到的头文件有两种：<br>
<code>cmath</code>  <code>iostream</code>头文件：C++ 语言头文件；<br>
<code>stdio.h</code>  <code>math.h</code>头文件：C 语言头文件。<br>
以下是最基本的程序，分别使用 C++ 与 C 语言。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">//预编译命令。因为代码要用 cout, endl</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span>    <span class="hljs-comment">//预编译命令。因为代码要用 sin,cos,tan 函数</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;  <span class="hljs-comment">//使后续cout,endl等命令不必写成std::cout,std::endl</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> <span class="hljs-comment">// 主函数</span></span><br><span class="hljs-function"></span>&#123; <span class="hljs-comment">// 主函数开始</span><br>    <span class="hljs-comment">// 计算三角函数式并输出</span><br>    cout &lt;&lt; <span class="hljs-built_in">sin</span>(<span class="hljs-number">20.0</span> / <span class="hljs-number">180</span> * <span class="hljs-number">3.14159</span>) *<br>        <span class="hljs-built_in">cos</span>(<span class="hljs-number">20.0</span> / <span class="hljs-number">180</span> * <span class="hljs-number">3.14159</span>) -<br>        <span class="hljs-built_in">cos</span>(<span class="hljs-number">10.0</span> / <span class="hljs-number">180</span> * <span class="hljs-number">3.14159</span>) /<br>        <span class="hljs-built_in">tan</span>(<span class="hljs-number">10.0</span> / <span class="hljs-number">180</span> * <span class="hljs-number">3.14159</span>)<br>        &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125; <span class="hljs-comment">// 主函数结束</span><br></code></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span> <span class="hljs-comment">// 或 #include &lt;cstdio&gt;，前者是C语言风格的头文件</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;math.h&gt;</span>  <span class="hljs-comment">// 或 #include &lt;cmath&gt;，前者是C语言风格的头文件</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%f\n&quot;</span>, <span class="hljs-built_in">sin</span>(<span class="hljs-number">20.0</span> / <span class="hljs-number">180</span> * <span class="hljs-number">3.14159</span>) * <span class="hljs-built_in">cos</span>(<span class="hljs-number">20.0</span> / <span class="hljs-number">180</span> * <span class="hljs-number">3.14159</span>) -<br>        <span class="hljs-built_in">cos</span>(<span class="hljs-number">10.0</span> / <span class="hljs-number">180</span> * <span class="hljs-number">3.14159</span>) / <span class="hljs-built_in">tan</span>(<span class="hljs-number">10.0</span> / <span class="hljs-number">180</span> * <span class="hljs-number">3.14159</span>));<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>对于不同的输出函数<code>cout</code>和<code>printf</code>，使用方法也不同，以后我们统一使用<code>cout</code>。以下是两种函数的格式控制与语法。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&#x27;A&#x27;</span> &lt;&lt; <span class="hljs-string">&#x27;b&#x27;</span> &lt;&lt; <span class="hljs-string">&quot;__THU__&quot;</span> &lt;&lt; <span class="hljs-string">&quot;DCS, THU, Beijing&quot;</span><br>        &lt;&lt; <span class="hljs-string">&quot;Hello, World&quot;</span> &lt;&lt; endl<br>        &lt;&lt; <span class="hljs-string">&quot;\t------------\n&quot;</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;\t************&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;2018.09.17\n&quot;</span>;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%c%c%s%s%s\n\t------------\n&quot;</span>, <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-string">&quot;__THU__&quot;</span>, <span class="hljs-string">&quot;DCS, THU, Beijing&quot;</span>, <span class="hljs-string">&quot;Hello, World&quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\t************\n&quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;2018.09.17\n&quot;</span>);<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="其他注记">其他注记</h3>
<p><code>define</code>可以用来定义变量，如圆周率等。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout, endl</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span>    <span class="hljs-comment">// sin,cos,tan</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> PI 3.141592653589793238462</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-built_in">sin</span>(<span class="hljs-number">20.0</span> / <span class="hljs-number">180</span> * PI) *<br>        <span class="hljs-built_in">cos</span>(<span class="hljs-number">20.0</span> / <span class="hljs-number">180</span> * PI) -<br>        <span class="hljs-built_in">cos</span>(<span class="hljs-number">10.0</span> / <span class="hljs-number">180</span> * PI) /<br>        <span class="hljs-built_in">tan</span>(<span class="hljs-number">10.0</span> / <span class="hljs-number">180</span> * PI)<br>    &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>iomanip</code>头文件可以用来控制<code>cout</code>格式。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; fixed &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">4</span>) &lt;&lt; <span class="hljs-number">1</span> / <span class="hljs-number">5.0</span> &lt;&lt; endl;<br>    cout &lt;&lt; fixed &lt;&lt; <span class="hljs-built_in">setprecision</span>(<span class="hljs-number">4</span>) &lt;&lt; <span class="hljs-number">1.0</span> / <span class="hljs-number">5</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h2 id="2-代数思维">2.代数思维</h2>
<h3 id="实例引入2">实例引入2</h3>
<p>我们用以下问题作为引入。<br>
我们国家在天气预报等日常生活中，通常是使用摄氏温度来表示温度高低（冷热）的。但还有一些国家是使用华氏温度来表示温度的。这两种温度体系之间存在如下换算关系：<br>
<code>celsius = (5/9) * (fahrenheit - 32)</code><br>
请你编写一个温度转换工具，能将用户输入的任意华氏温度转换为对应的摄氏温度。</p>
<p>对于这道题我们需要处理输入，输出，代数运算。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">double</span> fahrenheit;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Enter a degree in Fahrenheit: &quot;</span>;<br>    cin &gt;&gt; fahrenheit;<br>    <span class="hljs-type">double</span> celsius = (<span class="hljs-number">5.0</span> / <span class="hljs-number">9</span>) * (fahrenheit - <span class="hljs-number">32</span>);<br>    cout &lt;&lt; <span class="hljs-string">&quot;Fahrenheit &quot;</span> &lt;&lt; fahrenheit &lt;&lt; <span class="hljs-string">&quot; is &quot;</span><br>        &lt;&lt; celsius &lt;&lt; <span class="hljs-string">&quot; in celsius&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>这里涉及到的重要思想是变量。我们先了解变量的一些知识。</p>
<h3 id="大小，地址和指针">大小，地址和指针</h3>
<p><code>sizeof()</code>函数输出变量的size。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> i;<br>    <span class="hljs-type">short</span> s;<br>    <span class="hljs-type">char</span> c;<br>    <span class="hljs-type">double</span> d;<br>    cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>) &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(i) &lt;&lt; endl;    <span class="hljs-comment">// 输出 4 4</span><br>    cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">short</span>) &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(s) &lt;&lt; endl;  <span class="hljs-comment">// 输出 2 2</span><br>    cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">char</span>) &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(c) &lt;&lt; endl;   <span class="hljs-comment">// 输出 1 1</span><br>    cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">double</span>) &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(d) &lt;&lt; endl; <span class="hljs-comment">// 输出 8 8</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>这里我们介绍<code>&amp;</code>运算符，用来取变量地址。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a = <span class="hljs-number">13</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;&amp;a = &quot;</span> &lt;&lt; &amp;a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(&amp;a) &lt;&lt; endl;<br>    a += <span class="hljs-number">4</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;&amp;a = &quot;</span> &lt;&lt; &amp;a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; endl;<br>    <span class="hljs-type">double</span> d = <span class="hljs-number">1.2</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;&amp;d = &quot;</span> &lt;&lt; &amp;d &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(&amp;d) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>接下来我们介绍指针。指针是特殊的变量，可以将地址值赋予指针。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a = <span class="hljs-number">13</span>;<br>    <span class="hljs-type">int</span>* ptr; <span class="hljs-comment">// 定义一个可以保存整数类型单元地址值的变量，其名为ptr</span><br>    ptr = &amp;a; <span class="hljs-comment">// 将变量a所在内存单元的地址值赋给指针变量ptr</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;&amp;a = &quot;</span> &lt;&lt; &amp;a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; ptr &lt;&lt; endl; <span class="hljs-comment">// 输出指针变量ptr自己所在单元中保存的数值（即a的地址值）</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>如下是对指针性质的探究。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a = <span class="hljs-number">13</span>;<br>    <span class="hljs-type">int</span>* ptr;<br>    ptr = &amp;a;<br>    cout &lt;&lt; <span class="hljs-string">&quot;&amp;a = &quot;</span> &lt;&lt; &amp;a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; ptr &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; *ptr &lt;&lt; endl;<br><br>    a += <span class="hljs-number">4</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; *ptr &lt;&lt; endl;<br>    *ptr = <span class="hljs-number">23</span>; <span class="hljs-comment">// 向所指内存单元写入新值</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;a = &quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; *ptr &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="布尔变量，关系运算符">布尔变量，关系运算符</h3>
<p>布尔变量取值只有<code>false</code>和<code>true</code>。关系运算符通常返回布尔变量。<br>
这里的<code>boolalpha</code>函数可以以<code>true</code>/<code>false</code>来输出布尔。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; boolalpha; <span class="hljs-comment">// 以true/false来输出布尔值 </span><br>    cout &lt;&lt; <span class="hljs-string">&quot;(3 &gt; 5 ) &quot;</span> &lt;&lt; (<span class="hljs-number">3</span> &gt; <span class="hljs-number">5</span>) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;(3 &lt; 5 ) &quot;</span> &lt;&lt; (<span class="hljs-number">3</span> &lt; <span class="hljs-number">5</span>) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;(3 == 5) &quot;</span> &lt;&lt; (<span class="hljs-number">3</span> == <span class="hljs-number">5</span>) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;(3 != 5) &quot;</span> &lt;&lt; (<span class="hljs-number">3</span> != <span class="hljs-number">5</span>) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;(3 &lt;= 5) &quot;</span> &lt;&lt; (<span class="hljs-number">3</span> &lt;= <span class="hljs-number">5</span>) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;(3 &gt;= 5) &quot;</span> &lt;&lt; (<span class="hljs-number">3</span> &gt;= <span class="hljs-number">5</span>) &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实例2">实例2</h3>
<p>问题1：判断数的奇偶</p>
<p>这里我们需要使用<code>if-else</code>语句。满足<code>if</code>内布尔表达式则执行<code>if</code>后方语句，否则执行<code>else</code>后方语句。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a;<br>    cin &gt;&gt; a;<br><br>    <span class="hljs-keyword">if</span> (a % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)<br>        cout &lt;&lt; <span class="hljs-string">&quot;Even&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">else</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;Odd\n&quot;</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：计算二次方程的根<br>
对于一元二次方程 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>b</mi><mi>x</mi><mo>+</mo><mi>c</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">ax^2+bx+c=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">b</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，方程中的系数由用户在运行时输入。试编程根据用户输入的系数<code>a</code>,<code>b</code>,<code>c</code>求解方程的根。<br>
要求：如果没有实数根，则输出“无实数根”；如果有实数根且不相等，则输出两个根，中间用一个空格隔开；如果实数根相等，则输出一个根的值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span>  <span class="hljs-comment">// cin, cout</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span>     <span class="hljs-comment">// sqrt</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">double</span> a, b, c;<br>    <span class="hljs-type">double</span> delta;<br>    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;  <span class="hljs-comment">//输入a值时，要判断a不能为0更加严谨</span><br>    delta = b * b - <span class="hljs-number">4</span> * a * c;<br>    <span class="hljs-keyword">if</span> (delta &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;无实数根&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (delta == <span class="hljs-number">0</span>)<br>    &#123;<br>        cout &lt;&lt; -b / (<span class="hljs-number">2</span> * a) &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (delta &gt; <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (a &gt; <span class="hljs-number">0</span>)<br>        &#123;<br>            cout &lt;&lt; (-b + <span class="hljs-built_in">sqrt</span>(delta)) / (<span class="hljs-number">2</span> * a) &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span><br>                &lt;&lt; (-b - <span class="hljs-built_in">sqrt</span>(delta)) / (<span class="hljs-number">2</span> * a) &lt;&lt; endl;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            cout &lt;&lt; (-b - <span class="hljs-built_in">sqrt</span>(delta)) / (<span class="hljs-number">2</span> * a) &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span><br>                &lt;&lt; (-b + <span class="hljs-built_in">sqrt</span>(delta)) / (<span class="hljs-number">2</span> * a) &lt;&lt; endl;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="3-逻辑思维">3.逻辑思维</h2>
<h3 id="实例引入3">实例引入3</h3>
<p>问题：逻辑判断<br>
清华附中有四位同学A、B、C、D，其中一位做了好事，不留名，表扬信来了之后，校长问这四位是谁做的好事。<br>
A说：不是我。<br>
B说：是C。<br>
C说：是D。<br>
D说：他胡说。<br>
已知：三个人说的是真话，一个人说的是假话。现在请你根据这些信息，编写程序找出做了好事的人。</p>
<p>如果使用暴力解法，代码会变成这样：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">char</span> thisman = <span class="hljs-string">&#x27;A&#x27;</span> - <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> sum;<br><br>    <span class="hljs-comment">/// A</span><br>    thisman++;<br>    sum = (thisman != <span class="hljs-string">&#x27;A&#x27;</span>) + (thisman == <span class="hljs-string">&#x27;C&#x27;</span>)<br>        + (thisman == <span class="hljs-string">&#x27;D&#x27;</span>) + (thisman != <span class="hljs-string">&#x27;D&#x27;</span>);<br>    <span class="hljs-keyword">if</span> (sum == <span class="hljs-number">3</span>)<br>    &#123;   <span class="hljs-comment">// 如果3句话为真，则输出当前可能性所假定的人为做好事者</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;做好事者为&quot;</span> &lt;&lt; thisman &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/// B</span><br>    thisman++;<br>    sum = (thisman != <span class="hljs-string">&#x27;A&#x27;</span>) + (thisman == <span class="hljs-string">&#x27;C&#x27;</span>)<br>        + (thisman == <span class="hljs-string">&#x27;D&#x27;</span>) + (thisman != <span class="hljs-string">&#x27;D&#x27;</span>);<br>    <span class="hljs-keyword">if</span> (sum == <span class="hljs-number">3</span>)<br>    &#123;   <span class="hljs-comment">// 如果3句话为真，则输出当前可能性所假定的人为做好事者</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;做好事者为&quot;</span> &lt;&lt; thisman &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/// C</span><br>    thisman++;<br>    sum = (thisman != <span class="hljs-string">&#x27;A&#x27;</span>) + (thisman == <span class="hljs-string">&#x27;C&#x27;</span>)<br>        + (thisman == <span class="hljs-string">&#x27;D&#x27;</span>) + (thisman != <span class="hljs-string">&#x27;D&#x27;</span>);<br>    <span class="hljs-keyword">if</span> (sum == <span class="hljs-number">3</span>)<br>    &#123;   <span class="hljs-comment">// 如果3句话为真，则输出当前可能性所假定的人为做好事者</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;做好事者为&quot;</span> &lt;&lt; thisman &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/// D</span><br>    thisman++;<br>    sum = (thisman != <span class="hljs-string">&#x27;A&#x27;</span>) + (thisman == <span class="hljs-string">&#x27;C&#x27;</span>)<br>        + (thisman == <span class="hljs-string">&#x27;D&#x27;</span>) + (thisman != <span class="hljs-string">&#x27;D&#x27;</span>);<br>    <span class="hljs-keyword">if</span> (sum == <span class="hljs-number">3</span>)<br>    &#123;   <span class="hljs-comment">// 如果3句话为真，则输出当前可能性所假定的人为做好事者</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;做好事者为&quot;</span> &lt;&lt; thisman &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;找不出做好事者&quot;</span> &lt;&lt; endl; <span class="hljs-comment">// 输出无解信息</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>这样子代码变得十分冗长。</p>
<h3 id="for循环">for循环</h3>
<p>我们可以采用<code>for</code>循环语句进行优化。<code>for</code>语句能在满足表达式时重复执行语句，执行后对变量进行操作。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">char</span> thisman = <span class="hljs-string">&#x27;A&#x27;</span> - <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> sum;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++)<br>    &#123;<br>        thisman++;<br>        sum = (thisman != <span class="hljs-string">&#x27;A&#x27;</span>) + (thisman == <span class="hljs-string">&#x27;C&#x27;</span>)<br>            + (thisman == <span class="hljs-string">&#x27;D&#x27;</span>) + (thisman != <span class="hljs-string">&#x27;D&#x27;</span>);<br><br>        <span class="hljs-keyword">if</span> (sum == <span class="hljs-number">3</span>)<br>        &#123;   <span class="hljs-comment">// 如果3句话为真，则输出当前可能性所假定的人为做好事者</span><br>            cout &lt;&lt; <span class="hljs-string">&quot;做好事者为&quot;</span> &lt;&lt; thisman &lt;&lt; endl;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-string">&quot;找不出做好事者&quot;</span> &lt;&lt; endl; <span class="hljs-comment">// 输出无解信息</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// 返回1表示题目无解</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>实际上，我们可以用标志变量来判断是否有解：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> g = <span class="hljs-number">0</span>;     <span class="hljs-comment">// 初始化为0，表示“无解”</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">4</span>; k++) <span class="hljs-comment">// k是循环控制变量</span><br>    &#123; <span class="hljs-comment">// for 循环体开始</span><br>        <span class="hljs-type">char</span> thisman = <span class="hljs-string">&#x27;A&#x27;</span> + k;<br>        <span class="hljs-type">int</span> sum = (thisman != <span class="hljs-string">&#x27;A&#x27;</span>) + (thisman == <span class="hljs-string">&#x27;C&#x27;</span>)<br>            + (thisman == <span class="hljs-string">&#x27;D&#x27;</span>) + (thisman != <span class="hljs-string">&#x27;D&#x27;</span>);<br><br>        <span class="hljs-keyword">if</span> (sum == <span class="hljs-number">3</span>)<br>        &#123;   <span class="hljs-comment">// 如果3句话为真，则输出当前可能性所假定的人为做好事者</span><br>            cout &lt;&lt; <span class="hljs-string">&quot;做好事者为&quot;</span> &lt;&lt; thisman &lt;&lt; endl;<br>            g = <span class="hljs-number">1</span>; <span class="hljs-comment">// 有解标志置1，表示找到解了</span><br>        &#125;<br>    &#125; <span class="hljs-comment">// for 循环体结束</span><br><br>    <span class="hljs-keyword">if</span> (g != <span class="hljs-number">1</span>)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;找不出做好事者&quot;</span> &lt;&lt; endl; <span class="hljs-comment">// 输出无解信息</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>如果问题解是唯一的，实际上我们不需要等待循环结束，我们可以使用<code>break</code>语句跳出循环：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> g = <span class="hljs-number">0</span>;                  <span class="hljs-comment">// 声明变量为整数类型，初始化为0</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">4</span>; k++)      <span class="hljs-comment">// 循环从k为0到3，</span><br>    &#123;<br><br>        <span class="hljs-keyword">if</span> (((k != <span class="hljs-number">0</span>) + (k == <span class="hljs-number">2</span>) + (k == <span class="hljs-number">3</span>) + (k != <span class="hljs-number">3</span>)) == <span class="hljs-number">3</span>)<br>        &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;做好事者为&quot;</span> &lt;&lt; <span class="hljs-built_in">char</span>(<span class="hljs-string">&#x27;A&#x27;</span> + k) &lt;&lt; endl;  <span class="hljs-comment">// 输出做好事者</span><br>            g = <span class="hljs-number">1</span>;              <span class="hljs-comment">// 让有解标志置1</span><br>            <span class="hljs-keyword">break</span>;              <span class="hljs-comment">//终止循环</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (g != <span class="hljs-number">1</span>)                 <span class="hljs-comment">// 则输出无解信息</span><br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;找不出做好事者&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="二进制位运算">二进制位运算</h3>
<p>二进制位运算是一种很有用的技巧。以下程序是经典二进制猜数字游戏中输出各卡片上数字的程序，运用了位运算：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> m = <span class="hljs-number">0</span>; m &lt; <span class="hljs-number">7</span>; m++)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;CARD &quot;</span> &lt;&lt; m &lt;&lt; endl;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++) <span class="hljs-comment">/// 获得指定位置bit值</span><br>            <span class="hljs-keyword">if</span> (i &amp; (<span class="hljs-number">1</span> &lt;&lt; m)) <br>                cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        cout &lt;&lt; endl &lt;&lt; endl; <span class="hljs-comment">/// 每张卡片输出之间空一行</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实例3">实例3</h3>
<p>问题：<br>
某地刑侦大队对涉及六个嫌疑人的一桩疑案进行分析，以下内容叙述的是刑侦队搜集到的线索和情报：<br>
A、B 至少有一人作案；<br>
A、E、F 三人中至少有两人参与作案；<br>
A、D 不可能是同案犯；<br>
B、C 或同时作案，或与本案无关；<br>
C、D 中有且仅有一人作案；<br>
如果 D 没有参与作案，则 E 也不可能参与作案。<br>
请你编写程序，将作案人找出来。</p>
<p>我们介绍表达式<code>_(bool)_?_(value)_:_(value2)_</code>的用法，<code>?</code>前表达式为真时返回<code>:</code>前的值，否则返回后值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> cc1, cc2, cc3, cc4, cc5, cc6;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> A = <span class="hljs-number">0</span>; A &lt;= <span class="hljs-number">1</span>; A++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> B = <span class="hljs-number">0</span>; B &lt;= <span class="hljs-number">1</span>; B++)<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> C = <span class="hljs-number">0</span>; C &lt;= <span class="hljs-number">1</span>; C++)<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> D = <span class="hljs-number">0</span>; D &lt;= <span class="hljs-number">1</span>; D++)<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> E = <span class="hljs-number">0</span>; E &lt;= <span class="hljs-number">1</span>; E++)<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> F = <span class="hljs-number">0</span>; F &lt;= <span class="hljs-number">1</span>; F++)<br>                        &#123; <span class="hljs-comment">/// 最内层循环, 最后一个人</span><br>                            cc1 = A || B;<br>                            cc2 = !(A &amp;&amp; D);<br>                            cc3 = (A &amp;&amp; E) || (A &amp;&amp; F) || (E &amp;&amp; F);<br>                            cc4 = (B &amp;&amp; C) || (!B &amp;&amp; !C);<br>                            cc5 = (C &amp;&amp; !D) || (D &amp;&amp; !C);<br>                            cc6 = D || !E;<br>                            <span class="hljs-keyword">if</span> (cc1 + cc2 + cc3 + cc4 + cc5 + cc6 == <span class="hljs-number">6</span>)<br>                            &#123;<br>                                cout &lt;&lt; <span class="hljs-string">&quot;A:&quot;</span> &lt;&lt; (A == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;是罪犯&quot;</span> : <span class="hljs-string">&quot;不是罪犯&quot;</span>) &lt;&lt; endl;<br>                                cout &lt;&lt; <span class="hljs-string">&quot;B:&quot;</span> &lt;&lt; (B == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;是罪犯&quot;</span> : <span class="hljs-string">&quot;不是罪犯&quot;</span>) &lt;&lt; endl;<br>                                cout &lt;&lt; <span class="hljs-string">&quot;C:&quot;</span> &lt;&lt; (C == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;是罪犯&quot;</span> : <span class="hljs-string">&quot;不是罪犯&quot;</span>) &lt;&lt; endl;<br>                                cout &lt;&lt; <span class="hljs-string">&quot;D:&quot;</span> &lt;&lt; (D == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;是罪犯&quot;</span> : <span class="hljs-string">&quot;不是罪犯&quot;</span>) &lt;&lt; endl;<br>                                cout &lt;&lt; <span class="hljs-string">&quot;E:&quot;</span> &lt;&lt; (E == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;是罪犯&quot;</span> : <span class="hljs-string">&quot;不是罪犯&quot;</span>) &lt;&lt; endl;<br>                                cout &lt;&lt; <span class="hljs-string">&quot;F:&quot;</span> &lt;&lt; (F == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;是罪犯&quot;</span> : <span class="hljs-string">&quot;不是罪犯&quot;</span>) &lt;&lt; endl;<br>                            &#125;<br>                        &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：<br>
输入一个年份（2023-2050），输出这一年的日历。<br>
格式如下：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs makefile">01        1  2  3  4  5<br>    6  7  8  9 10 11 12<br>   13 14 15 16 17 18 19<br>   20 21 22 23 24 25 26<br>02 27 28 29 30 31  1  2<br>    3  4  5  6  7  8  9<br>   10 11 12 13 14 15 16<br>   17 18 19 20 21 22 23<br>03 24 25 26 27 28  1  2<br>......<br></code></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 用户输入年份</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;Please input year (2023-2050): &quot;</span>;<br>    <span class="hljs-type">int</span> year;<br>    cin &gt;&gt; year;<br>    <span class="hljs-keyword">if</span> (year &lt; <span class="hljs-number">2023</span> || year &gt; <span class="hljs-number">2050</span>) <br>  &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Error! Not in range [2023..2050]\n&quot;</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-comment">// 计算天数</span><br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y = <span class="hljs-number">2023</span>; y &lt; year; y++)<br>        cnt += (y % <span class="hljs-number">400</span> == <span class="hljs-number">0</span> || y % <span class="hljs-number">4</span> == <span class="hljs-number">0</span> &amp;&amp; y % <span class="hljs-number">100</span> != <span class="hljs-number">0</span>) ? <span class="hljs-number">366</span> : <span class="hljs-number">365</span>;<br>    <span class="hljs-comment">// 已知2023.01.01是星期日，计算1月1日是星期几 </span><br>    <span class="hljs-type">int</span> w = cnt % <span class="hljs-number">7</span>; <span class="hljs-comment">// 1: Mon, 2: Tue, 3: Wed, 4: Thu, 5: Fri, 6: Sat, 0: Sun </span><br>    <span class="hljs-keyword">if</span> (w == <span class="hljs-number">0</span>) w = <span class="hljs-number">7</span>; <span class="hljs-comment">// 调整一下，方便后续处理1月份的前导空白</span><br><br>    <span class="hljs-comment">// 开始输出指定年份的日历</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;01&quot;</span>; <span class="hljs-comment">// Jan.</span><br>    <span class="hljs-comment">// 输出年前空白（上一年在第一周里所占天数）</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> day = <span class="hljs-number">0</span>; day &lt; w - <span class="hljs-number">1</span>; day++) cout &lt;&lt; <span class="hljs-string">&quot;   &quot;</span>;<br>    <span class="hljs-comment">// 输出各月日历</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> month = <span class="hljs-number">1</span>; month &lt;= <span class="hljs-number">12</span>; month++) <br>  &#123;<br>        <span class="hljs-type">int</span> lastday = (month == <span class="hljs-number">4</span> || month == <span class="hljs-number">6</span> || month == <span class="hljs-number">9</span> || month == <span class="hljs-number">11</span>) ? <span class="hljs-number">30</span> : <span class="hljs-number">31</span>;<br>        <span class="hljs-keyword">if</span> (month == <span class="hljs-number">2</span>) <br>        lastday = (year % <span class="hljs-number">400</span> == <span class="hljs-number">0</span> || year % <span class="hljs-number">4</span> == <span class="hljs-number">0</span> &amp;&amp; year % <span class="hljs-number">100</span> != <span class="hljs-number">0</span>) ? <span class="hljs-number">29</span> : <span class="hljs-number">28</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> day = <span class="hljs-number">1</span>; day &lt;= lastday; day++, w++) <br>    &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%3d&quot;</span>, day); <span class="hljs-comment">// 右对齐，3字符宽，不足补空格</span><br>            <span class="hljs-keyword">if</span> (w % <span class="hljs-number">7</span> == <span class="hljs-number">0</span>) <br>      &#123;<br>                <span class="hljs-keyword">if</span> (lastday - day &lt; <span class="hljs-number">7</span> &amp;&amp; month &lt; <span class="hljs-number">12</span>)<br>                    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n%02d&quot;</span>, month + <span class="hljs-number">1</span>); <span class="hljs-comment">// 01 ~ 11 月日历最后一行要特殊处理，右对齐，2字符宽，不足补0</span><br>                <span class="hljs-keyword">else</span><br>                    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n  &quot;</span>); <span class="hljs-comment">// 一般情况是显示空格</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// 至此，已完成所有日期的输出</span><br>    cout &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="4-函数思维">4.函数思维</h2>
<h3 id="函数">函数</h3>
<p>函数能够将一段有特定功能的代码封装到函数中，这样声明函数后就能更方便的调用。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-built_in">add</span>(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>例如我们将计算三角形面积的面积的方法封装为函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">float</span> <span class="hljs-title">TriangleArea</span><span class="hljs-params">(<span class="hljs-type">float</span> base, <span class="hljs-type">float</span> height)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">float</span> area;<br>    area = <span class="hljs-number">0.5</span> * base * height;<br>    <span class="hljs-keyword">return</span> area;<br>&#125; <span class="hljs-comment">///先计算并保存，最后返回结果</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> base, height;<br>    cin &gt;&gt; base &gt;&gt; height;<br>    cout &lt;&lt; <span class="hljs-built_in">TriangleArea</span>(base, height) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>关于函数有几个重要概念：形式参数，实在参数及地址，用下面的代码加以说明：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">float</span> <span class="hljs-title">TriangleArea</span><span class="hljs-params">(<span class="hljs-type">float</span> base, <span class="hljs-type">float</span> height)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;In TriangleArea(): &quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot; base @ &quot;</span> &lt;&lt; &amp;base &lt;&lt; <span class="hljs-string">&quot;, height @ &quot;</span> &lt;&lt; &amp;height &lt;&lt; endl;<br>    <span class="hljs-type">float</span> area;<br>    area = <span class="hljs-number">0.5</span> * base * height;<br>    <span class="hljs-keyword">return</span> area;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> base, height;<br>    cout &lt;&lt; <span class="hljs-string">&quot;In main(): &quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot; base @ &quot;</span> &lt;&lt; &amp;base &lt;&lt; <span class="hljs-string">&quot;, height @ &quot;</span> &lt;&lt; &amp;height &lt;&lt; endl;<br>    cin &gt;&gt; base &gt;&gt; height;<br>    cout &lt;&lt; <span class="hljs-built_in">TriangleArea</span>(base, height) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实例4">实例4</h3>
<p>问题1：判断质数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span>    <span class="hljs-comment">// sqrt</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">IsPrime</span><span class="hljs-params">(<span class="hljs-type">int</span>)</span></span>; <span class="hljs-comment">// 子函数声明。相对于主函数main，用户自定义函数均可被称为“子”函数</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">0</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;请输入一个整数：n=&quot;</span>;<br>    cin &gt;&gt; n;<br><br>    <span class="hljs-comment">// 用实参n调用子函数，子函数返回值作为if语句的分支条件</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsPrime</span>(n))<br>        cout &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot;是质数&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">else</span><br>        cout &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot;不是质数&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">IsPrime</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">2</span>; k &lt;= <span class="hljs-built_in">sqrt</span>(n); k++)<br>        <span class="hljs-keyword">if</span> (n % k == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// n 能被k整除，返回false</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// n 不能被k整除，返回true</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：<br>
输出所有ASCII码对应的“字符”及其内存中的二进制表示（由0和1组成的串）。<br>
一行输出4个字符，字符之间用一个空格隔开<br>
在输出各字符时，格式要求如下：<br>
ASCII码的十进制值 二进制串 字符<br>
例如：<code>75 01001011 K</code><br>
十进制数占三个字符宽，不够宽时在后面补空格。</p>
<p>这里我们有获取某整数某个二进制位上的值的小技巧。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">out_int_with_sp</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; i;<br>    <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">10</span>)<br>        cout &lt;&lt; <span class="hljs-string">&quot;  &quot;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">100</span>)<br>        cout &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get_bit</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> pos)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> mask = (<span class="hljs-number">1</span> &lt;&lt; pos);<br>    <span class="hljs-type">int</span> bit = (n &amp; mask) &gt;&gt; pos;<br>    <span class="hljs-keyword">return</span> bit;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">output_bit</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> pos)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> bit = <span class="hljs-built_in">get_bit</span>(n, pos);<br>    cout &lt;&lt; bit;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">out_char_bin</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">7</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>        <span class="hljs-built_in">output_bit</span>(n, i);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">128</span>; i++)<br>    &#123;<br>        <span class="hljs-built_in">out_int_with_sp</span>(i);<br>        cout &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        <span class="hljs-built_in">out_char_bin</span>(i);<br>        cout &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; <span class="hljs-built_in">char</span>(i);<br>        <span class="hljs-keyword">if</span> (i % <span class="hljs-number">4</span> == <span class="hljs-number">3</span>)<br>            cout &lt;&lt; endl;<br>        <span class="hljs-keyword">else</span><br>            cout &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>4-7<br>
问题：<br>
编写程序，找出2－100以内的全部 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mi>n</mi><mtext>＋</mtext><mn>1</mn></mrow><annotation encoding="application/x-tex">4n＋1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">4</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">＋</span><span class="mord">1</span></span></span></span> 型质数，输出这些质数并统计输出它们的数目，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 为正整数。</p>
<p>这里我们介绍<code>continue</code>语句，用于跳过当前循环的后续语句，而不是直接跳出循环。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">IsPrime</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-type">bool</span> ans = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">2</span>; k &lt;= <span class="hljs-built_in">sqrt</span>(n); k++)<br>        <span class="hljs-keyword">if</span> (n % k == <span class="hljs-number">0</span>) &#123;<br>            ans = <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> Count = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= <span class="hljs-number">100</span>; i++) &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">IsPrime</span>(i)) <br>            <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-keyword">if</span> ((i - <span class="hljs-number">1</span>) % <span class="hljs-number">4</span> != <span class="hljs-number">0</span>) <br>            <span class="hljs-keyword">continue</span>;<br>        cout &lt;&lt; i &lt;&lt; endl;<br>        Count++;<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Count = &quot;</span> &lt;&lt; Count &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="5-数据组织与处理">5.数据组织与处理</h2>
<h3 id="数组">数组</h3>
<p>数组，顾名思义是一组数。基本性质可见以下代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> array[<span class="hljs-number">10</span>];<br>    <span class="hljs-type">char</span> message[<span class="hljs-number">10</span>];<br>    <span class="hljs-type">double</span> salary[<span class="hljs-number">10</span>];<br>    cout &lt;&lt; <span class="hljs-string">&quot;sizeof(int[10])    = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(array)<br>        &lt;&lt; <span class="hljs-string">&quot;, sizeof(int)*10    = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>) * <span class="hljs-number">10</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;sizeof(char[10])   = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(message)<br>        &lt;&lt; <span class="hljs-string">&quot;, sizeof(char)*10   = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">char</span>) * <span class="hljs-number">10</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;sizeof(double[10]) = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(salary)<br>        &lt;&lt; <span class="hljs-string">&quot;, sizeof(double)*10 = &quot;</span> &lt;&lt; <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">double</span>) * <span class="hljs-number">10</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>实际上在某些意义下，数组与指针是等价的。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> array[<span class="hljs-number">10</span>], * ptr;<br>    ptr = array;<br>    cout &lt;&lt; <span class="hljs-string">&quot;ptr   = &quot;</span> &lt;&lt; ptr &lt;&lt; <span class="hljs-string">&quot;, ptr + 1   = &quot;</span> &lt;&lt; ptr + <span class="hljs-number">1</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;array = &quot;</span> &lt;&lt; array &lt;&lt; <span class="hljs-string">&quot;, array + 1 = &quot;</span> &lt;&lt; array + <span class="hljs-number">1</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>        <span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) *(array + i) = i * <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">else</span> ptr[i] = i * <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>        cout &lt;&lt; <span class="hljs-string">&quot;array[&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;]:\t&quot;</span><br>        &lt;&lt; ptr[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; *(ptr + i) &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span><br>        &lt;&lt; array[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; *(array + i) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实例5-1">实例5.1</h3>
<p>问题1：<br>
某电视台举办歌手大奖赛，邀请了7名评委给歌手打分。在计算歌手的平均得分时，为了公平起见，要把这些评委给出的最高分、最低分都去掉，只将剩下的5名评委给出的评分进行平均。<br>
请你编写程序来完成这个任务。设评委给分区间为0~100分。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> score[<span class="hljs-number">7</span>];<br><br>    <span class="hljs-comment">// 1. 先完成所有输入和保存</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span>; i++)<br>        cin &gt;&gt; score[i];<br><br>    <span class="hljs-comment">// 2. 然后再进行统计计算</span><br>    <span class="hljs-type">int</span> min = <span class="hljs-number">100</span>, max = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">double</span> avg = <span class="hljs-number">0.0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span>; i++) &#123;<br>        <span class="hljs-keyword">if</span> (min &gt; score[i])<br>            min = score[i];<br>        <span class="hljs-keyword">if</span> (max &lt; score[i])<br>            max = score[i];<br>        avg += score[i];<br>    &#125;<br>    avg -= (max + min);<br>    avg /= <span class="hljs-number">5</span>;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;avg = &quot;</span> &lt;&lt; avg &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>实际上这样子声明的数组长度必须为确定值。如果长度不确定，我们可以使用<code>vector</code>。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> N; cin &gt;&gt; N;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">score</span><span class="hljs-params">(N)</span></span>;<br><br>    <span class="hljs-comment">// 1. 先完成所有输入和保存</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++)<br>        cin &gt;&gt; score[i];<br><br>    <span class="hljs-comment">// 2. 然后再进行统计计算</span><br>    <span class="hljs-type">int</span> min = <span class="hljs-number">100</span>, max = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">double</span> avg = <span class="hljs-number">0.0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++) &#123;<br>        <span class="hljs-keyword">if</span> (min &gt; score[i])<br>            min = score[i];<br>        <span class="hljs-keyword">if</span> (max &lt; score[i])<br>            max = score[i];<br>        avg += score[i];<br>    &#125;<br>    avg -= (max + min);<br>    avg /= (N - <span class="hljs-number">2</span>);<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;avg = &quot;</span> &lt;&lt; avg &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：<br>
输出未知长度序列的特定元素的和<br>
若该元素满足下列条件才能被选中求和：<br>
能被3或5整除；<br>
小于1000；<br>
这个数之前没有出现-1.</p>
<p>这里我们介绍另一种循环语句：<code>while</code>循环，只有当括号内表达式结果为真才会执行循环。<br>
<code>vector.push_back</code>将元素置于容器尾，<code>vector.size()</code>给出容器大小。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; list;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-type">int</span> x;<br>        cin &gt;&gt; x;<br>        <span class="hljs-keyword">if</span> (x == <span class="hljs-number">-1</span>)<br>            <span class="hljs-keyword">break</span>;<br>        list.<span class="hljs-built_in">push_back</span>(x);<br>    &#125;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; list.<span class="hljs-built_in">size</span>(); i++)<br>    &#123;<br>        <span class="hljs-type">int</span> x = list[i];<br>        <span class="hljs-keyword">if</span> (((x % <span class="hljs-number">3</span> &gt; <span class="hljs-number">0</span>) &amp;&amp; (x % <span class="hljs-number">5</span> &gt; <span class="hljs-number">0</span>)) ||<br>            (x &gt;= <span class="hljs-number">1000</span>))<br>            <span class="hljs-keyword">continue</span>;<br>        sum += x;<br>    &#125;<br>    cout &lt;&lt; sum;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题3：筛法寻找质数<br>
输出小于100的质数<br>
筛法是另一种重要的筛选质数的方法。依次在对应范围内排除掉质数的倍数即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cin, cout</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span> <span class="hljs-comment">// sqrt</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">FindPrimes</span><span class="hljs-params">(<span class="hljs-type">int</span>* array, <span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> d = <span class="hljs-number">2</span>; d &lt;= <span class="hljs-built_in">sqrt</span>(n); d++) &#123;<br>        <span class="hljs-keyword">if</span> (array[d] == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = d + d; k &lt;= n; k += d)<br>                array[k] = <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> prime[<span class="hljs-number">101</span>] = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">1</span> &#125;;<br>    <span class="hljs-built_in">FindPrimes</span>(prime, <span class="hljs-number">100</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= <span class="hljs-number">100</span>; i++)<br>        <span class="hljs-keyword">if</span> (prime[i] == <span class="hljs-number">0</span>)<br>            cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题4：查找元素<br>
查找一个元素是否在一个有序数组中<br>
这里我们介绍折半查找法，即排序后每次将数组折半查找。这与后面分治算法的思想有联系。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span>  <span class="hljs-comment">// cin, cout</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iomanip&gt;</span>   <span class="hljs-comment">// setw – 设置显示宽度</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">BinarySearch</span><span class="hljs-params">(<span class="hljs-type">int</span> AA[], <span class="hljs-type">int</span> Key, <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> middle = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (low &lt;= high) <br>    &#123;<br>        middle = (low + high) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span> (Key == AA[middle])<br>            <span class="hljs-keyword">return</span> middle;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Key &lt; AA[middle])<br>            high = middle - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            low = middle + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// 数组中没有Key</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">const</span> <span class="hljs-type">int</span> NUM = <span class="hljs-number">100</span>; <span class="hljs-comment">// NUM是整型常量</span><br>    <span class="hljs-type">int</span> a[NUM]; <span class="hljs-comment">// 数组大小可以使用整型常量</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; NUM; i++) <br>    &#123;<br>        a[i] = i * i + <span class="hljs-number">1</span>;<br>        cout &lt;&lt; <span class="hljs-built_in">setw</span>(<span class="hljs-number">4</span>) &lt;&lt; a[i] &lt;&lt; ((i + <span class="hljs-number">1</span>) % <span class="hljs-number">10</span> == <span class="hljs-number">0</span> ? <span class="hljs-string">&#x27;\n&#x27;</span> : <span class="hljs-string">&#x27; &#x27;</span>);<br>    &#125;<br><br>    <span class="hljs-type">int</span> searchKey;<br>    cout &lt;&lt; <span class="hljs-string">&quot;请输入一个待查正整数: &quot;</span>;<br>    cin &gt;&gt; searchKey;<br><br>    <span class="hljs-type">int</span> b = <span class="hljs-number">0</span>;<br>    b = <span class="hljs-built_in">BinarySearch</span>(a, searchKey, <span class="hljs-number">0</span>, NUM - <span class="hljs-number">1</span>);<br><br>    <span class="hljs-keyword">if</span> (b != <span class="hljs-number">-1</span>)<br>        cout &lt;&lt; <span class="hljs-string">&quot;查到该数在数组中为: a[&quot;</span> &lt;&lt; b &lt;&lt; <span class="hljs-string">&quot;]\n&quot;</span>;<br>    <span class="hljs-keyword">else</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;数组中无此数!\n&quot;</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题5：对数组排序<br>
我们这里介绍最简单的冒泡排序。从前向后遍历比较相邻两个元素，若位置不对则对换。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> a[<span class="hljs-number">6</span>] = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">8</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span> &#125;; <span class="hljs-comment">// 测试样例</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++) <span class="hljs-comment">// 遍数=个数-1</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">6</span> - i; j++) &#123;<br>            <span class="hljs-keyword">if</span> (a[j] &lt; a[j + <span class="hljs-number">1</span>]) &#123;<br>                <span class="hljs-type">int</span> tmp = a[j];<br>                a[j] = a[j + <span class="hljs-number">1</span>];<br>                a[j + <span class="hljs-number">1</span>] = tmp;<br>            &#125;<br>        &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">6</span>; i++)<br>        cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题6：<br>
A、B、C、D、E 五人合伙夜间捕鱼，凌晨时都疲惫不堪，各自在湖边的树丛中找地方睡着了。日上三竿，A第一个醒来，他将鱼平分作五份，把多余的一条扔回湖中，拿自己的一份回家去了。B第二个醒来，也将鱼平分为五份，扔掉多余的一条，只拿走自己的一份。接着  C、D、E 依次醒来，也都按同样的办法分鱼。<br>
问：这五个人至少合伙捕到多少条鱼？每个人醒来后，看到的鱼数分别是多少条？<br>
我们这里介绍<code>do-while</code>循环用法，与<code>while</code>类似，只不过现在是先执行后判断。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// 记录每人醒来后看到的鱼数</span><br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, fish[<span class="hljs-number">6</span>] = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span> &#125;;<br>    <span class="hljs-keyword">do</span> &#123;<br>        fish[<span class="hljs-number">5</span>] = fish[<span class="hljs-number">5</span>] + <span class="hljs-number">5</span>; <span class="hljs-comment">// 让E看到的鱼数增5</span><br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">4</span>; i &gt;= <span class="hljs-number">1</span>; i--) &#123;<br>            <span class="hljs-keyword">if</span> (fish[i + <span class="hljs-number">1</span>] % <span class="hljs-number">4</span> != <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">else</span><br>                fish[i] = fish[i + <span class="hljs-number">1</span>] / <span class="hljs-number">4</span> * <span class="hljs-number">5</span> + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125; <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">1</span>); <span class="hljs-comment">// 当 i&gt;=1 继续做do循环</span><br><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++)<br>        cout &lt;&lt; fish[i] &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="string">string</h3>
<p><code>string</code>是一种特殊的数组，C++中可以直接使用数据类型<code>string</code>。以下代码注释部分是C语言的写法。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-comment">// #include &lt;cstring&gt;  // strlen, strcat, strcmp, strcpy</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span> <span class="hljs-comment">// string</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// char str1[50] = &quot;BeiJing&quot;;</span><br>    string str1 = <span class="hljs-string">&quot;Beijing&quot;</span>;<br>    <span class="hljs-comment">// cout &lt;&lt; &quot;str1 length: &quot; &lt;&lt; strlen(str1) &lt;&lt; endl; // 字符串的长度</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;str1 length: &quot;</span> &lt;&lt; str<span class="hljs-number">1.l</span>ength() &lt;&lt; endl; <span class="hljs-comment">// 字符串的长度    </span><br>    <span class="hljs-comment">// strcat(str1, &quot;, Tsinghua!&quot;); // 拼接两个字符串</span><br>    str1 += <span class="hljs-string">&quot;, Tsinghua!&quot;</span>;    <br>    <span class="hljs-comment">// cout &lt;&lt; &quot;---&gt; &quot; &lt;&lt; str1 &lt;&lt; &quot; ==&gt; str1 length: &quot; &lt;&lt; strlen(str1) &lt;&lt; endl;</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;---&gt; &quot;</span> &lt;&lt; str1 &lt;&lt; <span class="hljs-string">&quot; ==&gt; str1 length: &quot;</span> &lt;&lt; str<span class="hljs-number">1.l</span>ength() &lt;&lt; endl;    <br>    <span class="hljs-comment">// cout &lt;&lt; &quot;Tsinghua &gt; Peking? &quot;                 // 比较两个字符串的字典序大小</span><br>    <span class="hljs-comment">//      &lt;&lt; strcmp(&quot;Tsinghua&quot;, &quot;Peking&quot;) &lt;&lt; endl; // 相等时返回 0</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;Tsinghua &gt; Peking? &quot;</span>                            <span class="hljs-comment">// 比较两个字符串的字典序大小</span><br>        &lt;&lt; (<span class="hljs-built_in">string</span>(<span class="hljs-string">&quot;Tsinghua&quot;</span>) &gt; <span class="hljs-built_in">string</span>(<span class="hljs-string">&quot;Peking&quot;</span>)) &lt;&lt; endl; <span class="hljs-comment">// 相等时返回 0</span><br>    <span class="hljs-comment">// char str2[100];              // 要注意有足够的空间</span><br>    string str2;<br>    <span class="hljs-comment">// strcpy(str2, &quot;THIS YEAR, &quot;); // 复制字符串</span><br>    str2 = <span class="hljs-string">&quot;THIS YEAR, &quot;</span>;<br>    <span class="hljs-comment">// strcat(str2, str1);</span><br>    str2 += str1;<br>    cout &lt;&lt; <span class="hljs-string">&quot;str2 = &quot;</span> &lt;&lt; str2 &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实例5-2">实例5.2</h3>
<p>问题1：<br>
某日某地，发生了一起严重交通事故，肇事司机逃跑了！<br>
目击者对交警说：肇事汽车的号码为4位完全平方数，且数字从左到右一个比一个大。<br>
请你编写程序，帮交警算出肇事车的号码。</p>
<p>常规解法如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">find_it</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">32</span>; i &lt; <span class="hljs-number">100</span>; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> n = i * i;<br>        <span class="hljs-keyword">if</span> (((n / <span class="hljs-number">1000</span>) &lt; (n / <span class="hljs-number">100</span> % <span class="hljs-number">10</span>)) &amp;&amp;<br>            ((n / <span class="hljs-number">100</span> % <span class="hljs-number">10</span>) &lt; (n / <span class="hljs-number">10</span> % <span class="hljs-number">10</span>)) &amp;&amp;<br>            ((n / <span class="hljs-number">10</span> % <span class="hljs-number">10</span>) &lt; (n % <span class="hljs-number">10</span>)))<br>            cout &lt;&lt; <span class="hljs-string">&quot;肇事汽车号码为&quot;</span> &lt;&lt; n &lt;&lt; endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">find_it</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>单纯闲来无事用数组自然也可以。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">find_it</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">32</span>; i &lt; <span class="hljs-number">100</span>; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> n = i * i;<br>        <span class="hljs-type">char</span> code[<span class="hljs-number">5</span>];<br>        <span class="hljs-built_in">sprintf_s</span>(code, <span class="hljs-string">&quot;%d&quot;</span>, n); <span class="hljs-comment">// 把整数转成数字字符数组，再进行比较。</span><br>        <span class="hljs-keyword">if</span> (code[<span class="hljs-number">0</span>] &lt; code[<span class="hljs-number">1</span>] &amp;&amp; code[<span class="hljs-number">1</span>] &lt; code[<span class="hljs-number">2</span>] &amp;&amp; code[<span class="hljs-number">2</span>] &lt; code[<span class="hljs-number">3</span>])<br>            cout &lt;&lt; <span class="hljs-string">&quot;肇事汽车号码为&quot;</span> &lt;&lt; n &lt;&lt; endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">find_it</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="多维数组">多维数组</h3>
<p>多维数组顾名思义拥有多个维度。<br>
比如我们计算3*3矩阵相乘，可以用二维数组：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Input m[][]:&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-type">int</span> m[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++)<br>            cin &gt;&gt; m[i][j];<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;Input n[][]:&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-type">int</span> n[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++)<br>            cin &gt;&gt; n[i][j];<br><br>    <span class="hljs-type">int</span> r[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++)<br>            r[i][j] = m[i][<span class="hljs-number">0</span>] * n[<span class="hljs-number">0</span>][j] +<br>            m[i][<span class="hljs-number">1</span>] * n[<span class="hljs-number">1</span>][j] +<br>            m[i][<span class="hljs-number">2</span>] * n[<span class="hljs-number">2</span>][j];<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;m[][] * n[][] = &quot;</span> &lt;&lt; endl;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++)<br>            cout &lt;&lt; r[i][j] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        cout &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实例5-3">实例5.3</h3>
<p>问题1：<br>
电视歌手大奖赛开赛报名时，由于人数较多，一些参赛信息需要及时录入计算机并用计算机进行管理。其中，有一个很重要的工作是：要按选手姓名（汉语拼音）排序后编号，以决定选手比赛的顺序。<br>
请你编程实现对姓名拼音串按英文字典顺序排序的程序。<br>
为测试程序，假定共有10名选手，选手姓名拼音最长不超过20个英文字符，且中间无空格。</p>
<p>解法一：我们采用二维字符数组。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">char</span> namelist[<span class="hljs-number">10</span>][<span class="hljs-number">20</span>]; <span class="hljs-comment">// 二维字符数组！</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Input #&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; singer&#x27;s name: &quot;</span>;<br>        cin &gt;&gt; namelist[i];<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++)         <span class="hljs-comment">// 轮(遍,趟)数=元素数目-1</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">9</span> - i; j++) <span class="hljs-comment">// 比较数=总轮数–当前轮次</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(namelist[j], namelist[j + <span class="hljs-number">1</span>]) &gt; <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-type">char</span> tmp[<span class="hljs-number">20</span>];<br>                <span class="hljs-built_in">strcpy_s</span>(tmp, namelist[j]);<br>                <span class="hljs-built_in">strcpy_s</span>(namelist[j], namelist[j + <span class="hljs-number">1</span>]);<br>                <span class="hljs-built_in">strcpy_s</span>(namelist[j + <span class="hljs-number">1</span>], tmp);<br>            &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>        cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; namelist[i] &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>解法二:我们使用<code>string</code>，<code>vector</code>，直接使用<code>sort</code>函数进行排序。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span>  <span class="hljs-comment">// cout</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span>    <span class="hljs-comment">// string</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span>    <span class="hljs-comment">// vector</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span> <span class="hljs-comment">// sort</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">vector&lt;string&gt; <span class="hljs-title">namelist</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>; <span class="hljs-comment">// 10个歌手的名字数组（向量）</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Input #&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; singer&#x27;s name: &quot;</span>;<br>        cin &gt;&gt; namelist[i];<br>    &#125;<br>    <span class="hljs-built_in">sort</span>(namelist.<span class="hljs-built_in">begin</span>(), namelist.<span class="hljs-built_in">end</span>()); <span class="hljs-comment">// 将向量&quot;头部&quot;和&quot;尾部&quot;传入排序函数</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>        cout &lt;&lt; i &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; namelist[i] &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>实际上<code>sort</code>函数相当好用。可以用来数组排序：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span>     <span class="hljs-comment">// cout</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span> <span class="hljs-comment">// sort</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> array[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">99</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">42</span>, <span class="hljs-number">14</span>, <span class="hljs-number">86</span>, <span class="hljs-number">36</span>&#125;;<br>    <span class="hljs-type">int</span> num = <span class="hljs-built_in">sizeof</span>(array) / <span class="hljs-built_in">sizeof</span>(array[<span class="hljs-number">0</span>]); <span class="hljs-comment">///  计算数组元素数量的小技巧</span><br>    <span class="hljs-built_in">sort</span>(array, array + num);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num; i++)<br>        cout &lt;&lt; array[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>若名字中含有空格，我们可以使用<code>getline</code>函数读取整行。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1;<br>    <span class="hljs-built_in">getline</span>(cin, str1);<br>    cout &lt;&lt; <span class="hljs-string">&quot;INPUT1 = [&quot;</span> &lt;&lt; str1 &lt;&lt; <span class="hljs-string">&quot;].&quot;</span> &lt;&lt; endl;<br><br>    <span class="hljs-type">char</span> str2[<span class="hljs-number">100</span>];<br>    cin.<span class="hljs-built_in">getline</span>(str2,<span class="hljs-number">99</span>);<span class="hljs-comment">//指定最大长度</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;INPUT2 = [&quot;</span> &lt;&lt; str2 &lt;&lt; <span class="hljs-string">&quot;].&quot;</span> &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：<br>
以整数数组排序为例，程序询问用户排序准则，从小到大时，输入1；从大到小时，输入2。程序根据用户的输入，输出指定的排序结果。<br>
这里我们使用函数指针数组来简化代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubble1</span><span class="hljs-params">(<span class="hljs-type">int</span> data[], <span class="hljs-type">int</span> num)</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num - <span class="hljs-number">1</span>; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; num - <span class="hljs-number">1</span> - i; j++)<br>            <span class="hljs-keyword">if</span> (data[j] &gt; data[j + <span class="hljs-number">1</span>]) <br>            &#123;<br>                <span class="hljs-type">int</span> tmp = data[j];<br>                data[j] = data[j + <span class="hljs-number">1</span>]; data[j + <span class="hljs-number">1</span>] = tmp;<br>            &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubble2</span><span class="hljs-params">(<span class="hljs-type">int</span> data[], <span class="hljs-type">int</span> num)</span> <span class="hljs-comment">/// 拷贝粘贴，稍作修改</span></span><br><span class="hljs-function"></span>&#123; <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num - <span class="hljs-number">1</span>; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; num - <span class="hljs-number">1</span> - i; j++)<br>            <span class="hljs-keyword">if</span> (data[j] &lt; data[j + <span class="hljs-number">1</span>]) <br>            &#123;<br>                <span class="hljs-type">int</span> tmp = data[j];<br>                data[j] = data[j + <span class="hljs-number">1</span>]; data[j + <span class="hljs-number">1</span>] = tmp;<br>            &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">/// 使用指向函数的指针，函数指针数组（也称为“函数跳转表”）</span><br>    <span class="hljs-built_in">void</span> (*pf[<span class="hljs-number">2</span>])(<span class="hljs-type">int</span>*, <span class="hljs-type">int</span>) = &#123; bubble1, bubble2 &#125;;<br>    <span class="hljs-comment">/// &lt;&lt;&lt;--- 这可能是C/C++语言中最令人困惑的语法形式了！</span><br>    <span class="hljs-type">int</span> data[] = &#123; <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span> &#125;;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    cin &gt;&gt; ans;<br>    pf[ans - <span class="hljs-number">1</span>](data, <span class="hljs-number">7</span>);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span>; i++) <br>        cout &lt;&lt; data[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>实际上我们也可以在函数参数中使用函数指针：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubble</span><span class="hljs-params">(<span class="hljs-type">int</span> data[], <span class="hljs-type">int</span> num, <span class="hljs-type">bool</span> (*op)(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>))</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num - <span class="hljs-number">1</span>; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; num - <span class="hljs-number">1</span> - i; j++)<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">op</span>(data[j], data[j + <span class="hljs-number">1</span>])) <br>            &#123;<br>                <span class="hljs-type">int</span> tmp = data[j];<br>                data[j] = data[j + <span class="hljs-number">1</span>];<br>                data[j + <span class="hljs-number">1</span>] = tmp;<br>            &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">op1</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a &gt; b; <br>&#125;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">op2</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span><br><span class="hljs-function"></span>&#123; <br>    <span class="hljs-keyword">return</span> a &lt; b; <br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">bool</span> (*pf[<span class="hljs-number">2</span>]) (<span class="hljs-type">int</span>, <span class="hljs-type">int</span>) = &#123; op1, op2 &#125;; <span class="hljs-comment">/// 称pf数组为“函数跳转表”</span><br><br>    <span class="hljs-type">int</span> data[] = &#123; <span class="hljs-number">8</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span> &#125;;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    cin &gt;&gt; ans;<br>    <span class="hljs-built_in">bubble</span>(data, <span class="hljs-number">7</span>, pf[ans - <span class="hljs-number">1</span>]);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span>; i++)<br>        cout &lt;&lt; data[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="结构体与函数">结构体与函数</h3>
<p>我们引入结构体这种数据类型。一个结构体中可以定义不同类型的元素，将他们统合起来就成了结构体。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span>  <span class="hljs-comment">// stcpy</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">package</span><br>&#123;<br>    <span class="hljs-type">char</span> msg[<span class="hljs-number">4</span>];<br>    <span class="hljs-type">int</span> v1, v2;<br>&#125;;<br><br><span class="hljs-function">package <span class="hljs-title">transfer</span><span class="hljs-params">(package data)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;&amp;data= &quot;</span> &lt;&lt; &amp;data &lt;&lt; <span class="hljs-string">&quot;, value = &quot;</span><br>        &lt;&lt; data.msg &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; data.v1 &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; data.v2 &lt;&lt; endl;<br>    package tmp;<br>    <span class="hljs-built_in">strcpy_s</span>(tmp.msg, data.msg);<br>    tmp.v1 = data.v1 + <span class="hljs-number">1</span>;<br>    tmp.v2 = data.v2 + <span class="hljs-number">2</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;&amp;tmp = &quot;</span> &lt;&lt; &amp;tmp &lt;&lt; <span class="hljs-string">&quot;, value = &quot;</span><br>        &lt;&lt; tmp.msg &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; tmp.v1 &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; tmp.v2 &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> tmp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    package pkg = &#123; <span class="hljs-string">&quot;ABC&quot;</span> &#125;, res;<br>    cout &lt;&lt; <span class="hljs-string">&quot;&amp;pkg = &quot;</span> &lt;&lt; &amp;pkg &lt;&lt; <span class="hljs-string">&quot;, value = &quot;</span><br>        &lt;&lt; pkg.msg &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; pkg.v1 &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; pkg.v2 &lt;&lt; endl;<br>    res = <span class="hljs-built_in">transfer</span>(pkg);<br>    cout &lt;&lt; <span class="hljs-string">&quot;&amp;res = &quot;</span> &lt;&lt; &amp;res &lt;&lt; <span class="hljs-string">&quot;, value = &quot;</span><br>        &lt;&lt; res.msg &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; res.v1 &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; res.v2 &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实例5-4">实例5.4</h3>
<p>问题1：<br>
根据《XX大学出售新建职工住宅实施办法》的规定，特批人员按下述原则进行排队：<br>
1、按照票数多少排序；<br>
2、票数相同的按职务等级排序；<br>
3、职务相同的按来校时间排序；<br>
4、来校时间相同按任职时间排序；<br>
5、任职时间相同的，按出生年月日排序。<br>
请你编写程序，完成下列人员的排队（序）。</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs makefile">姓名,票数,职务等级,来校时间,任职时间,出生时间<br>zhangsan, 48, 1, 2008, 2006, 1967<br>lisi,     50, 2, 2009, 2008, 1970<br>wangwu,   48, 1, 2008, 2006, 1966<br>zhaoliu,  50, 2, 2008, 2008, 1968<br>qianjiu,  35, 3, 2011, 2011, 1972<br></code></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span>  <span class="hljs-comment">// cout</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span> <span class="hljs-comment">// sort</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">person</span> <br>&#123;<br>    <span class="hljs-type">char</span> xingming[<span class="hljs-number">20</span>];<br>    <span class="hljs-type">int</span>  piaoshu;<br>    <span class="hljs-type">int</span>  zhiwu_dengji;<br>    <span class="hljs-type">int</span>  laixiao_shijian;<br>    <span class="hljs-type">int</span>  renzhi_shijian;<br>    <span class="hljs-type">int</span>  chusheng_shijian;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">output</span><span class="hljs-params">(person p)</span> </span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; p.xingming &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; p.piaoshu &lt;&lt; <span class="hljs-string">&quot;, &quot;</span><br>        &lt;&lt; p.zhiwu_dengji &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; p.laixiao_shijian &lt;&lt; <span class="hljs-string">&quot;, &quot;</span><br>        &lt;&lt; p.renzhi_shijian &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; p.chusheng_shijian &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Swap</span><span class="hljs-params">(person* first, person* second)</span> </span><br><span class="hljs-function"></span>&#123;<br>    person p;<br>    p = *first;<br>    *first = *second;<br>    *second = p;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">person_cmp</span><span class="hljs-params">(person a, person b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (a.piaoshu &lt; b.piaoshu) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> (a.piaoshu &gt; b.piaoshu) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">if</span> (a.zhiwu_dengji &lt; b.zhiwu_dengji) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> (a.zhiwu_dengji &gt; b.zhiwu_dengji) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">if</span> (a.laixiao_shijian &gt; b.laixiao_shijian) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> (a.laixiao_shijian &lt; b.laixiao_shijian) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">if</span> (a.renzhi_shijian &gt; b.renzhi_shijian) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> (a.renzhi_shijian &lt; b.renzhi_shijian) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">if</span> (a.chusheng_shijian &gt; b.chusheng_shijian) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span> (a.chusheng_shijian &lt; b.chusheng_shijian) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bubble</span><span class="hljs-params">(person* a, <span class="hljs-type">int</span> num)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; num - <span class="hljs-number">1</span>; j++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num - <span class="hljs-number">1</span> - j; i++)<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">person_cmp</span>(a[i], a[i + <span class="hljs-number">1</span>]))<br>                <span class="hljs-built_in">Swap</span>(&amp;(a[i]), &amp;(a[i + <span class="hljs-number">1</span>]));<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    person array[<span class="hljs-number">5</span>] = &#123; &#123;<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-number">48</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2008</span>, <span class="hljs-number">2006</span>, <span class="hljs-number">1967</span>&#125;,<br>                       &#123;<span class="hljs-string">&quot;lisi&quot;</span>,      <span class="hljs-number">50</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2009</span>, <span class="hljs-number">2008</span>, <span class="hljs-number">1970</span>&#125;,<br>                       &#123;<span class="hljs-string">&quot;wangwu&quot;</span>,    <span class="hljs-number">48</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2008</span>, <span class="hljs-number">2006</span>, <span class="hljs-number">1966</span>&#125;,<br>                       &#123;<span class="hljs-string">&quot;zhaoliu&quot;</span>,   <span class="hljs-number">50</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2008</span>, <span class="hljs-number">2008</span>, <span class="hljs-number">1968</span>&#125;,<br>                       &#123;<span class="hljs-string">&quot;qianjiu&quot;</span>,   <span class="hljs-number">35</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2011</span>, <span class="hljs-number">2011</span>, <span class="hljs-number">1972</span>&#125; &#125;;<br>    <span class="hljs-built_in">sort</span>(array, array + <span class="hljs-number">5</span>, person_cmp);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) <span class="hljs-built_in">output</span>(array[i]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：约瑟夫环<br>
n 只猴子围成一圈，顺时针方向从 0 到 n-1 编号。之后从 0 号开始沿顺时针方向让猴子按 1，2，…，m 依次报数。凡报到 m 的猴子，都让其出圈，取消其候选资格。不停地按顺时针方向逐一让报出 m 的猴子出圈，最后剩下那只就是猴王。<br>
请你编写程序模拟这个过程。要求按取消候选资格的次序，依次输出被淘汰猴子的编号，以及最后剩下的猴王编号。</p>
<p>实际上可以想象将一个数组“首尾相接”形成“环形数组”来解决。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    cout &lt;&lt; <span class="hljs-string">&quot;请输入猴子总数: &quot;</span>;<br>    cin &gt;&gt; n;<br>    cout &lt;&lt; <span class="hljs-string">&quot;请输入报数间隔: &quot;</span>;<br>    cin &gt;&gt; m;<br>    <span class="hljs-comment">// 根据猴子总数创建相应长度的向量，各元素值均为0</span><br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">ring</span><span class="hljs-params">(n)</span></span>;<br>    <span class="hljs-type">int</span> idx = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>        &#123;<br>            cnt++;<br>            <span class="hljs-comment">// 1. 寻找能够报数cnt的位置</span><br>            <span class="hljs-keyword">while</span> (ring[idx] == <span class="hljs-number">1</span>)<br>            &#123;<br>                idx++;<br>                idx %= n;<br>            &#125;<br>            <span class="hljs-comment">// 2. 若报数为m，则停止报数</span><br>            <span class="hljs-keyword">if</span> (cnt == m) <span class="hljs-keyword">break</span>;<br>            <span class="hljs-comment">// 3. 当前位置已安全报数，转下一位置</span><br>            idx++;<br>            idx %= n;<br>        &#125;<br>        ring[idx] = <span class="hljs-number">1</span>;<span class="hljs-comment">// 标记报数为m的猴子</span><br>        cout &lt;&lt; idx &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>; <span class="hljs-comment">// 输出报数为m的猴子位置（从0编号）</span><br>    &#125;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;---&gt; 猴王位置为 &quot;</span> &lt;&lt; idx &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="文件的读写">文件的读写</h3>
<p>有些时候我们需要对其他文件进行操作。<br>
我们先介绍打开文件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">char</span> fname[<span class="hljs-number">20</span>];<br>    cout &lt;&lt; <span class="hljs-string">&quot;Please input file name:&quot;</span>;<br>    cin &gt;&gt; fname;<br><br>    ifstream input;<br>    input.<span class="hljs-built_in">open</span>(fname);<br>    <span class="hljs-keyword">if</span> (input)<br>        cout &lt;&lt; <span class="hljs-string">&quot;Open &quot;</span> &lt;&lt; fname &lt;&lt; <span class="hljs-string">&quot; OK\n&quot;</span>;<br>    <span class="hljs-keyword">else</span><br>        cout &lt;&lt; fname &lt;&lt; <span class="hljs-string">&quot; not found!\n&quot;</span>;<br>    input.<span class="hljs-built_in">close</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>接下来我们需要读取文件内容：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span>      <span class="hljs-comment">// ifstream</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span>     <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">// file open, read one word and close</span><br><span class="hljs-comment">// move file-pointer and read some chars from file</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">ifstream <span class="hljs-title">in</span><span class="hljs-params">(<span class="hljs-string">&quot;log.txt&quot;</span>)</span></span>;<br>    <span class="hljs-comment">/// 文件指针从文件尾向文件头方向移动4个字节</span><br>    in.<span class="hljs-built_in">seekg</span>(<span class="hljs-number">-4</span>, ios_base::end); <span class="hljs-comment">/// 文件开头用ios_base::beg, 当前位置用ios_base::cur</span><br>    <span class="hljs-type">char</span> word[<span class="hljs-number">5</span>];<br>    in &gt;&gt; word;  <span class="hljs-comment">/// 从移动后的位置开始读取一个字符串</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;Last 4 chars = &quot;</span> &lt;&lt; word &lt;&lt; endl;<br>    in.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test2</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>进一步我们需要写入文件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span>  <span class="hljs-comment">// ofstream</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// file open, output and close</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    ofstream out;<br>    out.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;log.txt&quot;</span>); <span class="hljs-comment">// 如文件存在，则清除其内容</span><br>    out &lt;&lt; <span class="hljs-string">&quot;Hello, world!&quot;</span> &lt;&lt; endl;<br>    out.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-comment">// append</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    ofstream out;<br>    out.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;log.txt&quot;</span>, ios::app); <span class="hljs-comment">// 在原文件内容后面添加新内容</span><br>    out &lt;&lt; <span class="hljs-string">&quot;THU &quot;</span> &lt;&lt; endl &lt;&lt; <span class="hljs-string">&quot;CST##&quot;</span>;<br>    out.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-comment">// 主函数中对上述各种文件操作进行测试</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test1</span>();<br>    <span class="hljs-built_in">getchar</span>();<br>    <span class="hljs-built_in">test2</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>读写中还有一种特殊的形式：二进制读写，即以二进制的方式读取与写入。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// write binary data</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">w_test_1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ofstream out;<br>    out.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;log3.txt&quot;</span>, ios::binary);<br>    <span class="hljs-type">float</span> f = <span class="hljs-number">3.4f</span>;<br>    out.<span class="hljs-built_in">write</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">char</span> *&gt;(&amp;f), <span class="hljs-built_in">sizeof</span>(f)); <span class="hljs-comment">/// &amp;f 需要被转换成 char*</span><br>    <span class="hljs-comment">// 等价于 out.write((char*)(&amp;f), sizeof(f));</span><br>    out.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-comment">// read binary data</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">r_test_1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ifstream in;<br>    in.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;log3.txt&quot;</span>, ios::binary);<br>    <span class="hljs-type">float</span> f;<br>    in.<span class="hljs-built_in">read</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">char</span> *&gt;(&amp;f), <span class="hljs-built_in">sizeof</span>(f)); <span class="hljs-comment">/// &amp;f 需要被转换成 char*</span><br>    <span class="hljs-comment">// 等价于 in.read((char*)(&amp;f), sizeof(f));</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;f = &quot;</span> &lt;&lt; f &lt;&lt; endl;<br>    in.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-comment">// write binary struct</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">w_test_2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">S</span><br>    &#123;<br>        <span class="hljs-type">int</span> a, b;<br>        <span class="hljs-type">char</span> info[<span class="hljs-number">10</span>];<br>    &#125; data; <span class="hljs-comment">/// 定义结构类型和结构变量</span><br><br>    ofstream out;<br>    out.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;log4.txt&quot;</span>, ios::binary);<br>    data.a = <span class="hljs-number">3</span>;<br>    data.b = <span class="hljs-number">45</span>;<br>    <span class="hljs-built_in">strcpy</span>(data.info, <span class="hljs-string">&quot;THU&quot;</span>);<br>    out.<span class="hljs-built_in">write</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">char</span> *&gt;(&amp;data), <span class="hljs-built_in">sizeof</span>(data));<br>    out.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-comment">// read binary struct</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">r_test_2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">S</span><br>    &#123;<br>        <span class="hljs-type">int</span> a, b;<br>        <span class="hljs-type">char</span> info[<span class="hljs-number">10</span>];<br>    &#125; data; <span class="hljs-comment">/// 定义结构类型和结构变量</span><br><br>    ifstream in;<br>    in.<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;log4.txt&quot;</span>, ios::binary);<br>    in.<span class="hljs-built_in">read</span>(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">char</span> *&gt;(&amp;data), <span class="hljs-built_in">sizeof</span>(data));<br>    cout &lt;&lt; data.a &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; data.b &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; data.info &lt;&lt; endl;<br>    in.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">r_test_1</span>();<br>    <span class="hljs-built_in">w_test_1</span>();<br>    <span class="hljs-built_in">r_test_2</span>();<br>    <span class="hljs-built_in">w_test_2</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实例5-5">实例5.5</h3>
<p>问题1：<br>
老师给小明布置了一道有特殊要求的计算题：将10000个自然数进行累加（不要求以自然数序输入），数据是老师提供的，打印在纸上，要求手工输入给程序。<br>
注意：因为数据量巨大，可能需要好几天才能完成 …小明不干活时，程序是要求退出的（因为要关机）。<br>
输入0表示老师询问中间结果，程序输出累计结果。输入-1表示结束本轮输入，程序退出。<br>
要求：不能将中间结果输出到屏幕上。<br>
针对以上场景，我们可以采用文件读写的方式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> last_cnt = <span class="hljs-number">0</span>, last_res = <span class="hljs-number">0</span>;  <span class="hljs-comment">// 后面从文件读数据可能失败，因此需要在定义时进行初始化</span><br>    <span class="hljs-function">ifstream <span class="hljs-title">status</span><span class="hljs-params">(<span class="hljs-string">&quot;tmp.res&quot;</span>)</span></span>;<br>    <span class="hljs-keyword">if</span> (status)<br>        status &gt;&gt; last_cnt &gt;&gt; last_res; <span class="hljs-comment">// 若文件不存在，则不会更新这两个变量的值</span><br>    status.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">for</span> (; last_cnt &lt; <span class="hljs-number">10000</span>;)<br>    &#123;<br>        <span class="hljs-type">int</span> data;<br>        cout &lt;&lt; <span class="hljs-string">&quot;input &quot;</span> &lt;&lt; last_cnt &lt;&lt; <span class="hljs-string">&quot;-th number:&quot;</span>;<br>        cin &gt;&gt; data; <span class="hljs-comment">// 变量data既可能是用户要计算的数据，也可能是用户的“操作指令”</span><br>        <span class="hljs-keyword">if</span> (data == <span class="hljs-number">0</span>) <span class="hljs-comment">// 操作指令：要求输出当前结果</span><br>        &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;current result = &quot;</span> &lt;&lt; last_res &lt;&lt; endl;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (data == <span class="hljs-number">-1</span>) <span class="hljs-comment">// 操作指令：结束当前计算任务，保存中间结果</span><br>        &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;bye-bye&quot;</span> &lt;&lt; endl;<br>            <span class="hljs-function">ofstream <span class="hljs-title">fout</span><span class="hljs-params">(<span class="hljs-string">&quot;tmp.res&quot;</span>)</span></span>;<br>            fout &lt;&lt; last_cnt &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span> &lt;&lt; last_res;<br>            fout.<span class="hljs-built_in">close</span>();<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// 若执行到这里，则既没有continue, 也没有break，表明输入不是指令，在是需要累加的数</span><br>        last_res += data;<br>        last_cnt++;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (last_cnt == <span class="hljs-number">10000</span>)<br>        cout &lt;&lt; <span class="hljs-string">&quot;Finished! Final result = &quot;</span> &lt;&lt; last_res &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：<br>
对一篇英文文章中出现的单词进行统计，输出各个单词出现次数。<br>
例如，设某个文本文件的内容为：</p>
<p>If you are editing several files in emacs, each in its own buffer, each buffer has its own point location. A buffer that is not currently displayed remembers where point is in case you display it again later.</p>
<p>则程序应该输出：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs makefile">If 1<br>you 1<br>are 1<br>editing 1<br>several 1<br>files 1<br>in 3<br>...<br>again 1<br>later 1<br></code></pre></td></tr></table></figure>
<p>这里的文字从文件中读取。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">word_count</span> <br>&#123;<br>    <span class="hljs-type">char</span> word[<span class="hljs-number">20</span>];<br>    <span class="hljs-type">int</span> count;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> num = <span class="hljs-number">0</span>;<br>    <span class="hljs-function">vector&lt;word_count&gt; <span class="hljs-title">wd_cnt</span><span class="hljs-params">(<span class="hljs-number">100</span>)</span></span>;<br>    <span class="hljs-type">char</span> file_name[<span class="hljs-number">10</span>];<br>    cout &lt;&lt; <span class="hljs-string">&quot;Please input file name:&quot;</span>;<br>    cin &gt;&gt; file_name;<br>    fstream fin;<br>    fin.<span class="hljs-built_in">open</span>(file_name);<br>    <span class="hljs-keyword">while</span> (!fin.<span class="hljs-built_in">eof</span>()) <br>    &#123;<br>        <span class="hljs-type">char</span> word[<span class="hljs-number">20</span>];    <br>        fin &gt;&gt; word;<br>        <span class="hljs-type">bool</span> found = <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-type">char</span>* last_char = word + <span class="hljs-built_in">strlen</span>(word) - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (*last_char == <span class="hljs-string">&#x27;.&#x27;</span> || *last_char == <span class="hljs-string">&#x27;,&#x27;</span>)<br>            *last_char = <span class="hljs-string">&#x27;\0&#x27;</span>;<br><br>        <span class="hljs-keyword">if</span> (fin.<span class="hljs-built_in">eof</span>())<br>            <span class="hljs-keyword">break</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num; i++) <br>        &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(word, wd_cnt[i].word) == <span class="hljs-number">0</span>) <br>            &#123;<br>                wd_cnt[i].count++;<br>                found = <span class="hljs-literal">true</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (!found) <br>        &#123;<br>            <span class="hljs-built_in">strcpy_s</span>(wd_cnt[num].word, word);<br>            wd_cnt[num].count = <span class="hljs-number">1</span>;<br>            num++;<br>        &#125;<br>    &#125;<br><br>    fin.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num; i++)<br>        cout &lt;&lt; wd_cnt[i].word &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span><br>        &lt;&lt; wd_cnt[i].count &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题3：<br>
期中考试结束了。班主任孔老师让助教王小二从各科老师处拿到了全班学生的成绩。孔老师想通过计算班上每个学生的学分绩，统计班级平均分、最高分、最低分，得到班级成绩各分数段人数情况（也称直方图）。<br>
请你跟王小二一起来完成这个任务吧。已知课程有三门：几何与代数、离散数学、一元微积分。<br>
各科成绩保存在不同的文本文件中，存储格式为：文件每一行对应一名学生，包含学生姓名、学号、成绩（整数）。<br>
各课程的成绩文件、学分为：<br>
几代：<code>g.txt</code>，4 学分<br>
离散：<code>d.txt</code>，3 学分<br>
微积：<code>m.txt</code>，4 学分</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">OneGrade</span> <span class="hljs-comment">// 单科成绩</span><br>&#123;<br>    <span class="hljs-type">char</span> name[<span class="hljs-number">20</span>];<br>    <span class="hljs-type">long</span> <span class="hljs-type">int</span> id;<br>    <span class="hljs-type">int</span> score;<br>&#125;;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">AllGrade</span> <span class="hljs-comment">// 综合成绩</span><br>&#123;<br>    <span class="hljs-type">char</span> name[<span class="hljs-number">20</span>];<br>    <span class="hljs-type">long</span> <span class="hljs-type">int</span> id;<br>    <span class="hljs-type">int</span> m_score, g_score, d_score;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">read_from</span><span class="hljs-params">(<span class="hljs-type">char</span> fname[<span class="hljs-number">20</span>], OneGrade score_array[<span class="hljs-number">40</span>])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> idx = <span class="hljs-number">0</span>; <span class="hljs-comment">// student index</span><br>    ifstream fin;<br>    fin.<span class="hljs-built_in">open</span>(fname);<br>    <span class="hljs-keyword">while</span> (!fin.<span class="hljs-built_in">eof</span>())<br>    &#123;<br>        <span class="hljs-type">char</span> name[<span class="hljs-number">20</span>];<br>        <span class="hljs-type">long</span> <span class="hljs-type">int</span> id;<br>        <span class="hljs-type">int</span> score;<br>        fin &gt;&gt; name &gt;&gt; id &gt;&gt; score;<br>        <span class="hljs-built_in">strcpy_s</span>(score_array[idx].name, name);<br>        score_array[idx].id = id;<br>        score_array[idx].score = score;<br>        idx++;<br>    &#125;<br>    fin.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">return</span> idx;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> stu_num = <span class="hljs-number">0</span>; <span class="hljs-comment">// 学生总人数</span><br>    <span class="hljs-type">char</span> m_file[<span class="hljs-number">20</span>], g_file[<span class="hljs-number">20</span>], d_file[<span class="hljs-number">20</span>];<br>    OneGrade m_grade[<span class="hljs-number">40</span>], g_grade[<span class="hljs-number">40</span>], d_grade[<span class="hljs-number">40</span>];<br>    AllGrade mgd_grade[<span class="hljs-number">40</span>];<br><br>    <span class="hljs-built_in">memset</span>(mgd_grade, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(mgd_grade));<br>    <span class="hljs-type">float</span> max_gpa, min_gpa, avg_gpa;<br>    <span class="hljs-type">int</span> hist[<span class="hljs-number">6</span>]; <span class="hljs-comment">// 六个分数段：不及格，~70, ~80, ~90, ~100, 100</span><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;input m_grade file:&quot;</span>;<br>    cin &gt;&gt; m_file;<br>    stu_num = <span class="hljs-built_in">read_from</span>(m_file, m_grade);<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;input g_grade file:&quot;</span>;<br>    cin &gt;&gt; g_file;<br>    <span class="hljs-built_in">read_from</span>(g_file, g_grade);<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;input d_grade file:&quot;</span>;<br>    cin &gt;&gt; d_file;<br>    <span class="hljs-built_in">read_from</span>(d_file, d_grade);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; stu_num; i++)<br>    &#123;<br>        <span class="hljs-built_in">strcpy_s</span>(mgd_grade[i].name, d_grade[i].name);<br>        mgd_grade[i].id = d_grade[i].id;<br>        mgd_grade[i].d_score = d_grade[i].score;<br>    &#125; <span class="hljs-comment">// 完成一门课程的成绩复制</span><br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; stu_num; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; stu_num; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (mgd_grade[j].id == g_grade[i].id)<br>            &#123;<br>                mgd_grade[j].g_score = g_grade[i].score;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; stu_num; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; stu_num; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (mgd_grade[j].id == m_grade[i].id)<br>            &#123;<br>                mgd_grade[j].m_score = m_grade[i].score;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    max_gpa = <span class="hljs-number">0</span>;<br>    min_gpa = <span class="hljs-number">100</span>;<br>    avg_gpa = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">memset</span>(hist, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(hist));<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; stu_num; i++)<br>    &#123;<br>        <span class="hljs-type">float</span> gpa = (mgd_grade[i].m_score * <span class="hljs-number">4.0</span> +<br>                     mgd_grade[i].g_score * <span class="hljs-number">4.0</span> +<br>                     mgd_grade[i].d_score * <span class="hljs-number">3.0</span>) /<br>                    <span class="hljs-number">11</span>;<br>        <span class="hljs-keyword">if</span> (gpa &gt; max_gpa)<br>            max_gpa = gpa;<br>        <span class="hljs-keyword">if</span> (gpa &lt; min_gpa)<br>            min_gpa = gpa;<br>        avg_gpa += gpa; <span class="hljs-comment">// 先累加求和，循环结束后再除以人数</span><br>        <span class="hljs-keyword">if</span> (gpa &lt; <span class="hljs-number">60</span>)<br>            hist[<span class="hljs-number">0</span>]++; <span class="hljs-comment">// [ 0, 60)</span><br>        <span class="hljs-keyword">else</span><br>            hist[<span class="hljs-built_in">int</span>(gpa) / <span class="hljs-number">10</span> - <span class="hljs-number">5</span>]++;<br>    &#125; <span class="hljs-comment">// for</span><br><br>    avg_gpa /= stu_num;<br>    cout &lt;&lt; <span class="hljs-string">&quot;MAX GPA = &quot;</span> &lt;&lt; max_gpa &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;MIN GPA = &quot;</span> &lt;&lt; min_gpa &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;AVG GPA = &quot;</span> &lt;&lt; avg_gpa &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;[0..59], [60..69], [70..79], [80..89], [90..99], 100\n&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">6</span>; i++)<br>        cout &lt;&lt; <span class="hljs-string">&quot;HIST[&quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;]: &quot;</span> &lt;&lt; hist[i] &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题4：<br>
基于波形拼接算法的语音合成：利用事先录制好的样例语音<code>template.wav</code>（标准WAV文件，二进制文件），以及配套标注文件（纯文本文件），根据用户输入的数字串（假定均为合法数字），依次从样例语音文件中抽取相应数字对应的语音片段，将它们拼接到一起，保存到一个新的标准WAV格式文件中。要求提供程序运行参数来指定数字串，或运行时询问用户需要合成的数字串。<br>
标注文件<code>template_label_sample_point.txt</code>的格式为：每一行包含3列，分别表示数字、在语音数据中的起始位置（以采样样本为单位）、发音时间持续长度（以采样样本为单位）。例如：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs makefile">1 7296 9600<br>2 17840 7760<br></code></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span>  <span class="hljs-comment">// strlen</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span>  <span class="hljs-comment">// ifstream, ofstream</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cin, cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">char</span> TEMPLATE_WAV_FILE[] = <span class="hljs-string">&quot;template.wav&quot;</span>;<br><span class="hljs-type">char</span> TEMPLATE_WAV_LABEL_FILE[] = <span class="hljs-string">&quot;template_label_sample_point.txt&quot;</span>;<br><span class="hljs-type">char</span> OUTPUT_WAV_FILE[] = <span class="hljs-string">&quot;output.wav&quot;</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">WavHead</span> &#123;<br>    <span class="hljs-type">char</span> riff_id[<span class="hljs-number">4</span>];           <span class="hljs-comment">//! 标识串&quot;RIFF&quot;</span><br>    <span class="hljs-type">long</span> size0;                <span class="hljs-comment">//波形块的大小</span><br>    <span class="hljs-type">char</span> wave_fmt[<span class="hljs-number">8</span>];          <span class="hljs-comment">//! 标识串&quot;WAVEfmt &quot;</span><br>    <span class="hljs-type">long</span> size1;                <span class="hljs-comment">//格式块的大小</span><br>    <span class="hljs-type">short</span> fmttag;              <span class="hljs-comment">//波形编码格式</span><br>    <span class="hljs-type">short</span> channel;             <span class="hljs-comment">//音频数据的声道数</span><br>    <span class="hljs-type">long</span> sampl;                <span class="hljs-comment">//音频采样率</span><br>    <span class="hljs-type">long</span> bytepersecblockalign; <span class="hljs-comment">//每秒音频需要记录的字节数</span><br>    <span class="hljs-type">short</span> blockalign;          <span class="hljs-comment">//存储一个采样需要的字节数</span><br>    <span class="hljs-type">short</span> bitpersamples;       <span class="hljs-comment">//每个采样的二进制位数</span><br>    <span class="hljs-type">char</span> data[<span class="hljs-number">4</span>];              <span class="hljs-comment">//! 标识串&quot;data&quot;</span><br>    <span class="hljs-type">long</span> datasize;             <span class="hljs-comment">//数据块大小</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">str_equal</span><span class="hljs-params">(<span class="hljs-type">char</span>* a, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* b, <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (a[i] != b[i])<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_valid_fmt</span><span class="hljs-params">(WavHead* phead)</span> <span class="hljs-comment">// 结构体变量的指针！</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 文件格式检查</span><br>    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">str_equal</span>(phead-&gt;riff_id, <span class="hljs-string">&quot;RIFF&quot;</span>, <span class="hljs-number">4</span>) ||<br>        !<span class="hljs-built_in">str_equal</span>(phead-&gt;wave_fmt, <span class="hljs-string">&quot;WAVEfmt&quot;</span>, <span class="hljs-number">7</span>) ||<br>        !<span class="hljs-built_in">str_equal</span>(phead-&gt;data, <span class="hljs-string">&quot;data&quot;</span>, <span class="hljs-number">4</span>))<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Invalid wav format&quot;</span> &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-comment">// 数据格式检查</span><br>    <span class="hljs-keyword">if</span> (phead-&gt;channel != <span class="hljs-number">1</span>)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Only support channel = 1, now channel = &quot;</span> &lt;&lt; phead-&gt;channel &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (phead-&gt;bitpersamples != <span class="hljs-number">16</span>)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Only suport bitpeprsamples = 16, now bitpersamples = &quot;</span><br>            &lt;&lt; phead-&gt;bitpersamples &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-comment">// 通过指针参数phead返回文件头信息，通过函数返回值(short*)返回全部音频数据</span><br><span class="hljs-function"><span class="hljs-type">short</span>* <span class="hljs-title">load_wav</span><span class="hljs-params">(<span class="hljs-type">char</span>* wav_file, WavHead* phead)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">ifstream <span class="hljs-title">fin</span><span class="hljs-params">(wav_file, ios::binary)</span></span>;<br>    fin.<span class="hljs-built_in">read</span>((<span class="hljs-type">char</span>*)phead, <span class="hljs-built_in">sizeof</span>(WavHead));<br>    <span class="hljs-type">short</span>* pdata = <span class="hljs-keyword">new</span> <span class="hljs-type">short</span>[phead-&gt;datasize / <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">short</span>)];<br>    fin.<span class="hljs-built_in">read</span>((<span class="hljs-type">char</span>*)pdata, phead-&gt;datasize);<br>    fin.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">return</span> pdata;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">load_labels</span><span class="hljs-params">(<span class="hljs-type">char</span>* label_file, <span class="hljs-type">int</span>* start_sample, <span class="hljs-type">int</span>* len_samples)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">ifstream <span class="hljs-title">fin</span><span class="hljs-params">(label_file)</span></span>;<br>    <span class="hljs-type">int</span> num;<br>    <span class="hljs-keyword">while</span> (fin &gt;&gt; num)<br>        fin &gt;&gt; start_sample[num] &gt;&gt; len_samples[num];<br>    fin.<span class="hljs-built_in">close</span>();<br>&#125;<br><br><span class="hljs-comment">// 检查输入数字串是否合法</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_valid_input</span><span class="hljs-params">(<span class="hljs-type">char</span>* target)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">char</span> digit;<br>    <span class="hljs-keyword">while</span> (digit = *target++)<br>    &#123;<br>        <span class="hljs-comment">// 方法二：if (digit &lt; &#x27;0&#x27; || digit &gt; &#x27;9&#x27;)</span><br>        <span class="hljs-comment">// 方法三：使用 isdigit(digit) 函数进行判断（#include &lt;ctype.h&gt;)</span><br>        <span class="hljs-keyword">if</span> (!(digit &gt;= <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; digit &lt;= <span class="hljs-string">&#x27;9&#x27;</span>))<br>        &#123;<br>            cerr &lt;&lt; <span class="hljs-string">&quot;Invalid input &quot;</span> &lt;&lt; digit &lt;&lt; endl;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    WavHead head;<br>    <span class="hljs-type">short</span>* pdata = <span class="hljs-built_in">load_wav</span>(TEMPLATE_WAV_FILE, &amp;head); <span class="hljs-comment">// 读入语音数据</span><br>    <span class="hljs-type">int</span> start_sample[<span class="hljs-number">10</span>], len_samples[<span class="hljs-number">10</span>];<br>    <span class="hljs-built_in">load_labels</span>(TEMPLATE_WAV_LABEL_FILE, start_sample, len_samples); <span class="hljs-comment">// 读入文本标签</span><br>    <span class="hljs-type">char</span> target[<span class="hljs-number">100</span>];<br>    cout &lt;&lt; <span class="hljs-string">&quot;Please input digits (length &lt; 100): &quot;</span>;<br>    cin &gt;&gt; target;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">is_valid_input</span>(target))<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    <span class="hljs-comment">//! 用【语音拼接法】合成指定数字串的语音文件 --&gt;</span><br>    <span class="hljs-type">int</span> target_len = <span class="hljs-built_in">strlen</span>(target);<br>    <span class="hljs-function">ofstream <span class="hljs-title">fout</span><span class="hljs-params">(OUTPUT_WAV_FILE, ios::binary)</span></span>;  <span class="hljs-comment">// WAV文件是二进制的文件</span><br><br>    <span class="hljs-comment">// &lt;1&gt; 写入WAV文件的头结构：先计算语音数据长度，准备好WAV文件的头结构</span><br>    head.datasize = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; target_len; i++)<br>        head.datasize += len_samples[target[i] - <span class="hljs-string">&#x27;0&#x27;</span>] * <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">short</span>);<br>    fout.<span class="hljs-built_in">write</span>((<span class="hljs-type">char</span>*)&amp;head, <span class="hljs-built_in">sizeof</span>(WavHead));<br><br>    <span class="hljs-comment">// &lt;2&gt; 依次写入数字串中各位数字对应的语音数据</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; target_len; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> num = target[i] - <span class="hljs-string">&#x27;0&#x27;</span>; <span class="hljs-comment">// 从数字字符得到数字值</span><br>        fout.<span class="hljs-built_in">write</span>((<span class="hljs-type">char</span>*)(pdata + start_sample[num]), <span class="hljs-built_in">sizeof</span>(<span class="hljs-type">short</span>) * len_samples[num]);<br>    &#125;<br>    fout.<span class="hljs-built_in">close</span>();<br>    <span class="hljs-keyword">delete</span>[] pdata;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;Speech for &quot;</span> &lt;&lt; target &lt;&lt; <span class="hljs-string">&quot; saved in &quot;</span> &lt;&lt; OUTPUT_WAV_FILE &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="链表">链表</h3>
<p>循环链表是一种比较好的处理约瑟夫环的方式，每个节点包含自身的内容和指向下个节点的指针。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">monkey</span><br>&#123;<br>    <span class="hljs-type">int</span> num;<br>    monkey* next;<br>&#125;*head,*tail;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">create</span><span class="hljs-params">(<span class="hljs-type">int</span> nn)</span> </span>&#123;<br>    monkey* p, * q;<br><br>    p = <span class="hljs-keyword">new</span> monkey;<br>    p-&gt;num = <span class="hljs-number">1</span>;<br>    p-&gt;next = <span class="hljs-literal">NULL</span>;<br><br>    head = p;  <span class="hljs-comment">// 全局变量head为链表头，赋值为p</span><br>    q = p;     <span class="hljs-comment">// 局部变量q为当前链表尾，赋值为p</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= nn; i++) &#123;<br>        p = <span class="hljs-keyword">new</span> monkey;<br>        p-&gt;num = i;<br>        p-&gt;next = <span class="hljs-literal">NULL</span>;<span class="hljs-comment">// 链表尾部指向空</span><br>        q-&gt;next = p;   <span class="hljs-comment">// 将p结点加到链表尾部</span><br>        q = p;         <span class="hljs-comment">// 让q指向链表尾部结点</span><br>    &#125;<br>    tail = q; <span class="hljs-comment">// 全局变量tail为链表尾</span><br>    tail-&gt;next = head; <span class="hljs-comment">// 链表尾部指向链表头，形成了“循环链表”！</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> length;<br>    cin &gt;&gt; length;<br>    <span class="hljs-built_in">create</span>(length);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="6-减治思想">6.减治思想</h2>
<p>减而治之就是减治思想。</p>
<h3 id="递归函数">递归函数</h3>
<p>如果一个函数运行时需要调用他自己，这样的函数就叫做递归函数。例如如下函数用来计算正整数的阶乘：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">fact</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>)           <span class="hljs-comment">/// 终止条件</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;         <span class="hljs-comment">/// 直接返回</span><br><br>    <span class="hljs-keyword">return</span> n * <span class="hljs-built_in">fact</span>(n - <span class="hljs-number">1</span>); <span class="hljs-comment">/// n * (n-1)!</span><br>&#125;   <span class="hljs-comment">/// 自己调用自己的函数，被称为递归函数</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;fact(3) = &quot;</span> &lt;&lt; <span class="hljs-built_in">fact</span>(<span class="hljs-number">3</span>) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">/// 函数改变实参调用自己求解正整数的阶乘</span><br></code></pre></td></tr></table></figure>
<h3 id="实例6">实例6</h3>
<p>问题1：<br>
请编写程序，输出N*N的数字方阵，将1~N*N的自然数逆时针旋转填充到矩阵中。下面是一个6*6的矩阵完成填充后的示意图。</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs makefile">1 20 19 18 17 16<br>2 21 32 31 30 15<br>3 22 33 36 29 14<br>4 23 34 35 28 13<br>5 24 25 26 27 12<br>6  7  8  9 10 11<br></code></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> m[<span class="hljs-number">6</span>][<span class="hljs-number">6</span>] = &#123; &#123;<span class="hljs-number">0</span>&#125; &#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Show</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">6</span>; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">6</span>; j++)<br>            cout &lt;&lt; <span class="hljs-built_in">setw</span>(<span class="hljs-number">2</span>) &lt;&lt; m[i][j] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        cout &lt;&lt; endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Fill</span><span class="hljs-params">(<span class="hljs-type">int</span> num, <span class="hljs-type">int</span> begin, <span class="hljs-type">int</span> size)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (size == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-keyword">if</span> (size == <span class="hljs-number">1</span>) &#123;<br>        m[begin][begin] = num;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; size - <span class="hljs-number">1</span>; j++)<br>    &#123;<br>        m[begin + j][begin] = num + j;<br>        m[begin + size - <span class="hljs-number">1</span>][begin + j] = size - <span class="hljs-number">1</span> + num + j;<br>        m[begin + size - <span class="hljs-number">1</span> - j][begin + size - <span class="hljs-number">1</span>] = <span class="hljs-number">2</span> * (size - <span class="hljs-number">1</span>) + num + j;<br>        m[begin][begin + size - <span class="hljs-number">1</span> - j] = <span class="hljs-number">3</span> * (size - <span class="hljs-number">1</span>) + num + j;<br>    &#125;<br><br>    <span class="hljs-built_in">Fill</span>(num + <span class="hljs-number">4</span> * (size - <span class="hljs-number">1</span>), begin + <span class="hljs-number">1</span>, size - <span class="hljs-number">2</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">Fill</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>);<br>    <span class="hljs-built_in">Show</span>();<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：<br>
计算组合数 C(m, n)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">C</span><span class="hljs-params">(<span class="hljs-type">int</span> m, <span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (m &lt; <span class="hljs-number">0</span> || n &lt; <span class="hljs-number">0</span> || m &lt; n)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (m == n) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> m;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">C</span>(m - <span class="hljs-number">1</span>, n) + <span class="hljs-built_in">C</span>(m - <span class="hljs-number">1</span>, n - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;C(6,2) = &quot;</span><br>        &lt;&lt; <span class="hljs-built_in">C</span>(<span class="hljs-number">6</span>, <span class="hljs-number">2</span>) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题3：<br>
计算斐波那契数列<br>
我们在这里使用备忘录的技巧。如果计算过一些值，我们将他们储存起来，再次计算时就不需要重复计算了。这能将时间复杂度换为空间复杂度。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> FIB[<span class="hljs-number">20</span>] = &#123; <span class="hljs-number">0</span> &#125;; <span class="hljs-comment">/// 这个变量被称为“备忘录”，存储已计算的结果</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">fib</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (FIB[n])<br>        <span class="hljs-keyword">return</span> FIB[n]; <span class="hljs-comment">/// 若已计算过，直接查“备忘录”返回结果（也称“查表”）</span><br>    <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">2</span>)<br>        FIB[n] = n;  <span class="hljs-comment">// 保存到备忘录中</span><br>    <span class="hljs-keyword">else</span><br>        FIB[n] = <span class="hljs-built_in">fib</span>(n - <span class="hljs-number">1</span>) + <span class="hljs-built_in">fib</span>(n - <span class="hljs-number">2</span>);  <span class="hljs-comment">// 保存到备忘录中</span><br>    <span class="hljs-keyword">return</span> FIB[n];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">12</span>; i++)<br>        cout &lt;&lt; <span class="hljs-built_in">fib</span>(i) &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题4：<br>
汉诺塔问题</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> step = <span class="hljs-number">1</span>;  <span class="hljs-comment">// 记录操作步骤的次序</span><br><br><span class="hljs-comment">// 函数功能：将n只盘子，从A柱借助B柱移到C柱，输出操作步骤</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">move</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">char</span> A, <span class="hljs-type">char</span> B, <span class="hljs-type">char</span> C)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// 如果n为1，则为直接可解结点</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;[&quot;</span> &lt;&lt; step &lt;&lt; <span class="hljs-string">&quot;] move 1# from &quot;</span> &lt;&lt; A<br>            &lt;&lt; <span class="hljs-string">&quot; to &quot;</span> &lt;&lt; C &lt;&lt; endl;<br>        step++;<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">move</span>(n - <span class="hljs-number">1</span>, A, C, B);<br>        <span class="hljs-comment">//直接可解结点，输出操作步骤的文字说明信息</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;[&quot;</span> &lt;&lt; step &lt;&lt; <span class="hljs-string">&quot;] move &quot;</span> &lt;&lt; n<br>            &lt;&lt; <span class="hljs-string">&quot;# from &quot;</span> &lt;&lt; A &lt;&lt; <span class="hljs-string">&quot; to &quot;</span> &lt;&lt; C &lt;&lt; endl;<br>        step++;<br>        <span class="hljs-built_in">move</span>(n - <span class="hljs-number">1</span>, B, A, C);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cout &lt;&lt; <span class="hljs-string">&quot;盘数n = &quot;</span>;<br>    cin &gt;&gt; n;<br>    cout &lt;&lt; <span class="hljs-string">&quot;在3根柱子上移&quot;</span> &lt;&lt; n &lt;&lt; <span class="hljs-string">&quot;只盘的步骤为: &quot;</span> &lt;&lt; endl;<br>    <span class="hljs-built_in">move</span>(n, <span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-string">&#x27;B&#x27;</span>, <span class="hljs-string">&#x27;C&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="7-分治思想">7.分治思想</h2>
<p>分而治之就是分治思想。</p>
<h3 id="从排序算法说起">从排序算法说起</h3>
<p>选择排序：选择数组中元素最小的元素，与第一位交换，然后递归。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">select_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> A[], <span class="hljs-type">int</span> n)</span> </span>&#123;<br>    <span class="hljs-comment">// 1. 检查递归是否中止</span><br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-comment">// 2. 查找最小元素</span><br>    <span class="hljs-type">int</span> smallest = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++)<br>        <span class="hljs-keyword">if</span> (A[i] &lt; A[smallest]) smallest = i;<br><br>    <span class="hljs-comment">// 3. 将最小元素与A[0]交换（如果需要的话）</span><br>    <span class="hljs-keyword">if</span> (smallest) &#123;<br>        <span class="hljs-type">int</span> tmp = A[<span class="hljs-number">0</span>];<br>        A[<span class="hljs-number">0</span>] = A[smallest];<br>        A[smallest] = tmp;<br>    &#125;<br><br>    <span class="hljs-comment">// 4. 对剩余数组继续使用选择排序</span><br>    <span class="hljs-built_in">select_sort</span>(A + <span class="hljs-number">1</span>, n - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> A[] = &#123; <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span> &#125;;  <span class="hljs-comment">// just for test</span><br><br>    <span class="hljs-type">int</span> num = <span class="hljs-built_in">sizeof</span>(A) / <span class="hljs-built_in">sizeof</span>(A[<span class="hljs-number">0</span>]);<br><br>    <span class="hljs-built_in">select_sort</span>(A, num);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num; i++) cout &lt;&lt; A[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>归并排序：将数组拆分为两个子数组分别排序，递归分治，最后合并。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">merge_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> A[], <span class="hljs-type">int</span> start, <span class="hljs-type">int</span> end)</span> </span>&#123;<br>    <span class="hljs-comment">/// 1. 递归中止条件</span><br>    <span class="hljs-keyword">if</span> (start == end - <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-comment">/// 2. 对两个子数组分开排序</span><br>    <span class="hljs-type">int</span> mid = (end + start) / <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">merge_sort</span>(A, start, mid);<br>    <span class="hljs-built_in">merge_sort</span>(A, mid, end);<br><br>    <span class="hljs-comment">/// 3. 合并有序子数组中的元素</span><br>    <span class="hljs-comment">/// 3.1 分配临时空间存放合并元素</span><br>    <span class="hljs-type">int</span>* tmp = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[end - start];<br>    <span class="hljs-comment">/// 3.2 依次取出子数组的元素，进行合并</span><br>    <span class="hljs-type">int</span> left_idx = start, right_idx = mid, i = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (left_idx &lt; mid &amp;&amp; right_idx &lt; end) &#123;<br>        <span class="hljs-keyword">if</span> (A[left_idx] &lt; A[right_idx])<br>            tmp[i++] = A[left_idx++];<br>        <span class="hljs-keyword">else</span><br>            tmp[i++] = A[right_idx++];<br>    &#125;<br><br>    <span class="hljs-comment">/// 3.3 如果有子数组元素没有取完，则全部并入临时空间</span><br>    <span class="hljs-keyword">while</span> (left_idx &lt; mid)  <br>        tmp[i++] = A[left_idx++]; <span class="hljs-comment">/// 先左</span><br>    <span class="hljs-keyword">while</span> (right_idx &lt; end) <br>        tmp[i++] = A[right_idx++];<span class="hljs-comment">/// 后右</span><br><br>    <span class="hljs-comment">/// 3.4 从临时空间复制回返回数组中</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>, idx = start; i &lt; end - start; i++, idx++)<br>        A[idx] = tmp[i];<br><br>    <span class="hljs-comment">/// 3.5 释放临时空间</span><br>    <span class="hljs-keyword">delete</span>[] tmp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> A[] = &#123; <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span> &#125;;  <span class="hljs-comment">// just for test</span><br><br>    <span class="hljs-type">int</span> num = <span class="hljs-built_in">sizeof</span>(A) / <span class="hljs-built_in">sizeof</span>(A[<span class="hljs-number">0</span>]);<br><br>    <span class="hljs-built_in">merge_sort</span>(A, <span class="hljs-number">0</span>, num);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num; i++) cout &lt;&lt; A[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>快速排序：选取特定元素，将比其大和比其小的元素分别置于两侧，随后递归分治。</p>
<p>快速排序1</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span>   </span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> a[] = &#123; <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span> &#125;;  <span class="hljs-comment">/// 全局数组变量</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(<span class="hljs-type">int</span> z, <span class="hljs-type">int</span> y)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (z &gt;= y) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-type">int</span> zz = z, yy = y, k = a[z], m = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-comment">/// scan from right to left</span><br>        <span class="hljs-keyword">while</span> ((zz &lt; yy) &amp;&amp; (a[yy] &gt; k)) yy--;<br>        <span class="hljs-keyword">if</span> (zz &lt; yy) a[zz++] = a[yy];<br><br>        <span class="hljs-comment">/// scan from left to right</span><br>        <span class="hljs-keyword">while</span> ((zz &lt; yy) &amp;&amp; (a[zz] &lt;= k)) zz++;<br>        <span class="hljs-keyword">if</span> (zz &lt; yy) a[yy--] = a[zz];<br>    &#125; <span class="hljs-keyword">while</span> (zz != yy);<br>    m = zz;   <span class="hljs-comment">/// 找到了分区点，记录到m中</span><br>    a[m] = k; <span class="hljs-comment">/// 完成分区操作（数值k归位）</span><br><br>    <span class="hljs-built_in">sort</span>(z, m - <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">sort</span>(m + <span class="hljs-number">1</span>, y);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> len = <span class="hljs-built_in">sizeof</span>(a) / <span class="hljs-built_in">sizeof</span>(a[<span class="hljs-number">0</span>]);<br>    <span class="hljs-built_in">sort</span>(<span class="hljs-number">0</span>, len - <span class="hljs-number">1</span>);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>        cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>快速排序2（去掉全局变量，调整函数接口）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span>        <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(<span class="hljs-type">int</span> array[], <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (low &gt;= high) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-type">int</span> z = low, y = high, k = array[z];<br>    <span class="hljs-keyword">do</span> &#123;<br>        <span class="hljs-comment">/// scan from right to left</span><br>        <span class="hljs-keyword">while</span> ((z &lt; y) &amp;&amp; (array[y] &gt; k)) y--;<br>        <span class="hljs-keyword">if</span> (z &lt; y) array[z++] = array[y];<br><br>        <span class="hljs-comment">/// scan from left to right</span><br>        <span class="hljs-keyword">while</span> ((z &lt; y) &amp;&amp; (array[z] &lt;= k)) z++;<br>        <span class="hljs-keyword">if</span> (z &lt; y) array[y--] = array[z];<br>    &#125; <span class="hljs-keyword">while</span> (z != y);<br>    array[z] = k;<br><br>    <span class="hljs-built_in">sort</span>(array, low, z - <span class="hljs-number">1</span>);<br>    <span class="hljs-built_in">sort</span>(array, z + <span class="hljs-number">1</span>, high);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> a[] = &#123; <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span> &#125;;<br>    <span class="hljs-type">int</span> len = <span class="hljs-built_in">sizeof</span>(a) / <span class="hljs-built_in">sizeof</span>(a[<span class="hljs-number">0</span>]);<br><br>    <span class="hljs-built_in">sort</span>(a, <span class="hljs-number">0</span>, len - <span class="hljs-number">1</span>);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>        cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>9-5<br>
快速排序3（暴力分区）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">quick_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> *array, <span class="hljs-type">int</span> len)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (len &lt;= <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-comment">/// 按最坏可能，为两个子数组分配空间</span><br>    <span class="hljs-type">int</span> *left = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[len], *right = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[len];<br>    <span class="hljs-comment">/// 设置两个子数组长度的初值（为零）</span><br>    <span class="hljs-type">int</span> left_len = <span class="hljs-number">0</span>, right_len = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">/// 1. 拆分</span><br>    <span class="hljs-type">int</span> key = array[<span class="hljs-number">0</span>]; <span class="hljs-comment">/// 选第0个元素为基准值</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; len; i++)<br>    &#123; <span class="hljs-comment">/// 将剩余各数进行分区</span><br>        <span class="hljs-keyword">if</span> (array[i] &lt;= key)<br>            left[left_len++] = array[i];<br>        <span class="hljs-keyword">if</span> (array[i] &gt; key)<br>            right[right_len++] = array[i];<br>    &#125;<br>    <span class="hljs-comment">/// 2. 对子数组进行排序</span><br>    <span class="hljs-built_in">quick_sort</span>(left, left_len);<br>    <span class="hljs-built_in">quick_sort</span>(right, right_len);<br>    <span class="hljs-comment">/// 3. 合并子数组，先左后右</span><br>    <span class="hljs-type">int</span> idx = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; left_len; i++)<br>        array[idx++] = left[i];<br>    array[idx++] = key;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; right_len; i++)<br>        array[idx++] = right[i];<br>    <span class="hljs-comment">/// 释放空间</span><br>    <span class="hljs-keyword">delete</span>[] left;<br>    <span class="hljs-keyword">delete</span>[] right;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a[] = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;<br>    <span class="hljs-type">int</span> len = <span class="hljs-built_in">sizeof</span>(a) / <span class="hljs-built_in">sizeof</span>(a[<span class="hljs-number">0</span>]);<br><br>    <span class="hljs-built_in">quick_sort</span>(a, len);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>        cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>9-6<br>
快速排序4（双向同步）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">quick_sort</span><span class="hljs-params">(<span class="hljs-type">int</span> *p, <span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-type">int</span> t = p[n - <span class="hljs-number">1</span>], left = <span class="hljs-number">0</span>, right = n - <span class="hljs-number">2</span>; <span class="hljs-comment">/// 尾部元素作基准</span><br>    <span class="hljs-keyword">do</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (; right &gt;= left; left++)<br>            <span class="hljs-keyword">if</span> (p[left] &gt; t)<br>                <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">for</span> (; right &gt;= left; right--)<br>            <span class="hljs-keyword">if</span> (p[right] &lt; t)<br>                <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">if</span> (right &gt;= left)<br>            <span class="hljs-built_in">swap</span>(p[left], p[right]);<br>    &#125; <span class="hljs-keyword">while</span> (right &gt;= left);<br>    <span class="hljs-built_in">swap</span>(p[left], p[n - <span class="hljs-number">1</span>]); <span class="hljs-comment">/// 将基准元素交换到它该去的位置</span><br>    <span class="hljs-built_in">quick_sort</span>(&amp;p[<span class="hljs-number">0</span>], left);<br>    <span class="hljs-built_in">quick_sort</span>(&amp;p[left + <span class="hljs-number">1</span>], n - left - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a[] = &#123;<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;;<br>    <span class="hljs-type">int</span> len = <span class="hljs-built_in">sizeof</span>(a) / <span class="hljs-built_in">sizeof</span>(a[<span class="hljs-number">0</span>]);<br><br>    <span class="hljs-built_in">quick_sort</span>(a, len);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>        cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="实例7">实例7</h3>
<p>问题1：<br>
一条小溪尺寸不大，青蛙可以从左岸跳到右岸，左岸有一石柱L，面积只容得下一只青蛙落脚，同样右岸也有一石柱R，面积也只容得下一只青蛙落脚。有一队青蛙从尺寸上一个比一个小。我们将青蛙从小到大，用1，2，…，n编号。<br>
规定：初始时这队青蛙只能趴在左岸的石头L上，按编号一个落一个，小的落在大的上面。不允许大的在小的上面。<br>
在小溪中有S个石柱，有y片荷叶，规定溪中的柱子上允许一只青蛙落脚，如有多只同样要求按编号一个落一个，大的在下，小的在上，而且必须编号相邻。对于荷叶只允许一只青蛙落脚，不允许多只在其上。对于右岸的石柱R，与左岸的石柱L一样允许多个青蛙落脚，但须一个落一个，小的在上，大的在下，且编号相邻。<br>
当青蛙从左岸的L上跳走后就不允许再跳回来；同样，从左岸L上跳至右岸R，或从溪中荷叶或溪中石柱跳至右岸R上的青蛙也不允许再离开。<br>
问: 在已知溪中有s根石柱和y片荷叶的情况下，最多能跳过多少只青蛙？</p>
<p>这本质上是个数学问题。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Jump</span><span class="hljs-params">(<span class="hljs-type">int</span> S, <span class="hljs-type">int</span> y)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (S == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> y + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * <span class="hljs-built_in">Jump</span>(S - <span class="hljs-number">1</span>, y);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">int</span> S, y, sum;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;ÇëÊäÈëÊ¯ÖùÊýS=&quot;</span>;<br>    cin &gt;&gt; S;<br>    cout &lt;&lt; <span class="hljs-string">&quot;ÇëÊäÈëºÉÒ¶Êýy=&quot;</span>;<br>    cin &gt;&gt; y;<br><br>    sum = <span class="hljs-built_in">Jump</span>(S, y);<br>    cout &lt;&lt; <span class="hljs-string">&quot;Jump(&quot;</span> &lt;&lt; S &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; y &lt;&lt; <span class="hljs-string">&quot;) = 2&quot;</span> &lt;&lt; sum &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：<br>
请你编写一个程序，输出九连环的操作步骤<br>
1.只有第一个环可以自由上下，前两个环可同时上下<br>
2.想要卸下某个环，就必须满足两个条件:<br>
第一、这个环的前一个环要留在杆上;<br>
第二、其他前面的环都不在上面。<br>
装跟卸的方法、条件一样，倒推过来就行。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// 设置正的初始状态为“在线上（为1）”</span><br><span class="hljs-type">int</span> ring[<span class="hljs-number">10</span>] = &#123; <span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span> &#125;;<br><br><span class="hljs-comment">// 上或下使用同一个函数（递归实现）</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ChangeTo</span><span class="hljs-params">(<span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> dst)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (ring[pos] == dst) <span class="hljs-keyword">return</span>;<br><br>    <span class="hljs-comment">// 1. </span><br>    <span class="hljs-built_in">ChangeTo</span>(pos - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">// 2.</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> idx = pos - <span class="hljs-number">2</span>; idx &gt; <span class="hljs-number">0</span>; idx--) <span class="hljs-built_in">ChangeTo</span>(idx, <span class="hljs-number">0</span>);<br><br>    <span class="hljs-comment">// 3.</span><br>    ring[pos] = dst;<br><br>    <span class="hljs-comment">// 4.</span><br>    cout &lt;&lt; pos &lt;&lt; <span class="hljs-string">&quot;--&gt;&quot;</span> &lt;&lt; dst &lt;&lt; <span class="hljs-string">&quot; [&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">9</span>; i++) cout &lt;&lt; ring[i] &lt;&lt; <span class="hljs-string">&quot;, &quot;</span>;<br>    cout &lt;&lt; ring[<span class="hljs-number">9</span>] &lt;&lt; <span class="hljs-string">&quot;]\n&quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// 0. 从9到1按顺序将环取下（置为0）</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">9</span>; i &gt; <span class="hljs-number">0</span>; i--) <span class="hljs-built_in">ChangeTo</span>(i, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="8-枚举思想">8.枚举思想</h2>
<h3 id="实例8">实例8</h3>
<p>问题1：<br>
从楼上到楼下一共有 h 级台阶，若每一步有三种走法（步幅）：<br>
走一级台阶；<br>
走二级台阶；<br>
走三级台阶。<br>
请给出所有可能的下楼方案。每个方案包括：共要多少步？每一步走几级台阶？请用递归算法求解。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// 方案细节记录在take中，方案数用num累计</span><br><span class="hljs-type">int</span> take[<span class="hljs-number">100</span>], num = <span class="hljs-number">0</span>;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Try</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> s)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">3</span>; j &gt; <span class="hljs-number">0</span>; j--)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (i &gt;= j)<br>        &#123;<br>            take[s] = j; <span class="hljs-comment">// 记录第s步走j个台阶</span><br>            <span class="hljs-keyword">if</span> (i == j)<br>            &#123;          <span class="hljs-comment">// 如果已经到了楼下</span><br>                num++; <span class="hljs-comment">// 则方案数加1</span><br>                cout &lt;&lt; <span class="hljs-string">&quot;方案&quot;</span> &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot;: &quot;</span>;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= s; k++)<br>                    cout &lt;&lt; take[k];<br>                cout &lt;&lt; endl;<br>            &#125;<br>            <span class="hljs-keyword">else</span>                   <span class="hljs-comment">// 尚未走到楼下</span><br>                <span class="hljs-built_in">Try</span>(i - j, s + <span class="hljs-number">1</span>); <span class="hljs-comment">// 再试剩下的台阶</span><br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 有i级台阶，从第s步开始</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;请输入楼梯台阶数h(&lt;100)：&quot;</span>;<br>    <span class="hljs-type">int</span> h;<br>    cin &gt;&gt; h; <span class="hljs-comment">// 输入楼梯的台阶数</span><br><br>    <span class="hljs-built_in">Try</span>(h, <span class="hljs-number">1</span>); <span class="hljs-comment">// 从第h级，开始下第一步</span><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;总方案数：&quot;</span> &lt;&lt; num &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：<br>
在半张中国象棋的棋盘上，一只马从左下角跳到右上角，只允许往右跳，不允许往左跳，问能有多少种跳步方案。<br>
要求：输出方案数和各方案的具体跳法。</p>
<p>解法一（常规）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> dx[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>&#125;, dy[] = &#123;<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">-2</span>&#125;;<br><span class="hljs-type">int</span> num, path[<span class="hljs-number">100</span>][<span class="hljs-number">2</span>];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Jump</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> step)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 是否到达目标？</span><br>    <span class="hljs-keyword">if</span> ((x == <span class="hljs-number">8</span>) &amp;&amp; (y == <span class="hljs-number">4</span>))<br>    &#123;<br>        num++; <span class="hljs-comment">// 方案数加1</span><br>        cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot;: &quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; step; i++) <span class="hljs-comment">// 从起点开始输出各步的坐标</span><br>            cout &lt;&lt; <span class="hljs-string">&quot;(&quot;</span> &lt;&lt; path[i][<span class="hljs-number">0</span>] &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; path[i][<span class="hljs-number">1</span>] &lt;&lt; <span class="hljs-string">&quot;) &quot;</span>;<br>        cout &lt;&lt; endl;<br><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">// 遍历四种跳步方向</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">4</span>; k++)<br>    &#123;<br>        <span class="hljs-type">int</span> x1 = x + dx[k], y1 = y + dy[k];<br><br>        <span class="hljs-comment">// 若(x1, y1)不可行，则放弃当前测试，转至下一个跳步方案</span><br>        <span class="hljs-keyword">if</span> ((x1 &lt; <span class="hljs-number">0</span>) || (x1 &gt; <span class="hljs-number">8</span>) || (y1 &lt; <span class="hljs-number">0</span>) || (y1 &gt; <span class="hljs-number">4</span>))<br>            <span class="hljs-keyword">continue</span>;<br><br>        path[step][<span class="hljs-number">0</span>] = x1;<br>        path[step][<span class="hljs-number">1</span>] = y1;<br><br>        <span class="hljs-comment">/// 从(x1, y1)出发到目标点，有多少种跳法？--- 问题性质相同，规模缩小：递归！</span><br>        <span class="hljs-built_in">Jump</span>(x1, y1, step + <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 初始方案数置0</span><br>    num = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// 从位置(0,0)出发，第0步</span><br>    <span class="hljs-built_in">Jump</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>解法二（结构体数组）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">position</span><br>&#123;<br>    <span class="hljs-type">int</span> x, y;<br>&#125;;<br>position dxy[<span class="hljs-number">4</span>] = &#123;&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">-1</span>&#125;, &#123;<span class="hljs-number">1</span>, <span class="hljs-number">-2</span>&#125;&#125;;<br>position start_pos = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;, goal_pos = &#123;<span class="hljs-number">8</span>, <span class="hljs-number">4</span>&#125;;<br>position path[<span class="hljs-number">100</span>];<br><span class="hljs-type">int</span> num;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Jump</span><span class="hljs-params">(position pos, <span class="hljs-type">int</span> step)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 是否到达目标？</span><br>    <span class="hljs-keyword">if</span> ((pos.x == <span class="hljs-number">8</span>) &amp;&amp; (pos.y == <span class="hljs-number">4</span>))<br>    &#123;<br>        num++; <span class="hljs-comment">// 方案数加1</span><br>        cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot;: &quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; step; i++) <span class="hljs-comment">// 从起点开始输出各步的坐标</span><br>            cout &lt;&lt; <span class="hljs-string">&quot;(&quot;</span> &lt;&lt; path[i].x &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; path[i].y &lt;&lt; <span class="hljs-string">&quot;) &quot;</span>;<br>        cout &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// 遍历四种跳步方向</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">4</span>; k++)<br>    &#123;<br>        position next_pos = &#123;pos.x + dxy[k].x, pos.y + dxy[k].y&#125;;<br>        <span class="hljs-comment">// 检查next_pos是否可行？</span><br>        <span class="hljs-keyword">if</span> ((next_pos.x &lt; <span class="hljs-number">0</span>) || (next_pos.x &gt; <span class="hljs-number">8</span>) ||<br>            (next_pos.y &lt; <span class="hljs-number">0</span>) || (next_pos.y &gt; <span class="hljs-number">4</span>))<br>            <span class="hljs-keyword">continue</span>;<br><br>        <span class="hljs-comment">// 记录方案！结构变量可以直接赋值！</span><br>        path[step] = next_pos;<br><br>        <span class="hljs-comment">// 从next_pos出发到目标位置，有多少种跳步方案？【递归】</span><br>        <span class="hljs-built_in">Jump</span>(next_pos, step + <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    num = <span class="hljs-number">0</span>;            <span class="hljs-comment">// 初始方案数置0</span><br>    <span class="hljs-built_in">Jump</span>(start_pos, <span class="hljs-number">0</span>); <span class="hljs-comment">// 跳第一步</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题3：<br>
有编号分别为 0、1、2、3、4 的五本书，准备分给A、B、C、D、E五个人。请你写一个程序，输出所有的分书方案，要求每个分书方案都能让每个人都皆大欢喜（即每人都分到感兴趣的书）。假定这5个人对5本书的阅读兴趣如下表（1表示喜欢，0表示不喜欢）：</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs makefile">  0  1  2  3  4<br>A 0, 0, 1, 1, 0<br>B 1, 1, 0, 0, 1<br>C 0, 1, 1, 0, 1<br>D 0, 0, 0, 1, 0<br>E 0, 1, 0, 0, 1<br></code></pre></td></tr></table></figure>
<p>一种重要的想法是回溯算法：当方案不满足条件时进行回溯处理。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">/// 读者与书本的编号都是基于0的</span><br><span class="hljs-type">int</span> like[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>] = &#123;&#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;,<br>                  &#123;<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;,<br>                  &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;,<br>                  &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;,<br>                  &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;&#125;;<br><span class="hljs-type">int</span> num;         <span class="hljs-comment">/// 方案数</span><br><span class="hljs-type">int</span> assigned[<span class="hljs-number">5</span>]; <span class="hljs-comment">/// assigned[book_id] = reader_id，值为-1表示没有被分配</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Try</span><span class="hljs-params">(<span class="hljs-type">int</span> reader)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">/// 递归中止条件：所有读者均已分配合适书籍</span><br>    <span class="hljs-keyword">if</span> (reader == <span class="hljs-number">5</span>)<br>    &#123;<br>        num++;<br>        cout &lt;&lt; <span class="hljs-string">&quot;第&quot;</span> &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot;个方案（5本书的读者编号）: &quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++)<br>            cout &lt;&lt; assigned[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        cout &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">/// 逐一为每本书找到合适的读者</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> book = <span class="hljs-number">0</span>; book &lt; <span class="hljs-number">5</span>; book++)<br>    &#123;<br>        <span class="hljs-comment">/// 是否满足分书条件</span><br>        <span class="hljs-keyword">if</span> ((like[reader][book] != <span class="hljs-number">1</span>) || assigned[book] != <span class="hljs-number">-1</span>)<br>            <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-comment">/// 记录当前这本书的分配情况</span><br>        assigned[book] = reader;<br>        <span class="hljs-comment">/// 从下一位读者开始，分配剩余书籍的所有方案</span><br>        <span class="hljs-built_in">Try</span>(reader + <span class="hljs-number">1</span>);<br>        <span class="hljs-comment">/// 尝试下一种分书方案前，需要将本次分配的书退还（回溯），即恢复“未分配”状态</span><br>        assigned[book] = <span class="hljs-number">-1</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// 设置分书方案数初始值为0</span><br>    num = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">/// 设置书本初始状态为未分配</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> book = <span class="hljs-number">0</span>; book &lt; <span class="hljs-number">5</span>; book++)<br>        assigned[book] = <span class="hljs-number">-1</span>;<br><br>    <span class="hljs-comment">/// 从第0个读者开始，寻找所有分书方案</span><br>    <span class="hljs-built_in">Try</span>(<span class="hljs-number">0</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>另一种解法（不回溯）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span> <span class="hljs-comment">// cout</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> like[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>] = &#123;&#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;,<br>                  &#123;<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;,<br>                  &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;,<br>                  &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;,<br>                  &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;&#125;;<br><span class="hljs-type">int</span> num; <span class="hljs-comment">/// 方案数</span><br><br><span class="hljs-comment">/// 分配方案：记录5本书分别分给谁（用户编号)</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">assign_state</span><br>&#123;<br>    <span class="hljs-type">int</span> assigned[<span class="hljs-number">5</span>];<br>&#125; state;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Try</span><span class="hljs-params">(<span class="hljs-type">int</span> reader, assign_state state)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">/// 递归中止条件：所有读者均已分配合适书籍</span><br>    <span class="hljs-keyword">if</span> (reader == <span class="hljs-number">5</span>)<br>    &#123;<br>        num++;<br>        cout &lt;&lt; <span class="hljs-string">&quot;第&quot;</span> &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot;个方案（5本书的读者编号）: &quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++)<br>            cout &lt;&lt; state.assigned[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        cout &lt;&lt; endl;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">/// 逐一为每本书找到合适的读者</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> book = <span class="hljs-number">0</span>; book &lt; <span class="hljs-number">5</span>; book++)<br>    &#123;<br>        <span class="hljs-comment">/// 是否满足分书条件</span><br>        <span class="hljs-keyword">if</span> (like[reader][book] != <span class="hljs-number">1</span> || state.assigned[book] != <span class="hljs-number">-1</span>)<br>            <span class="hljs-keyword">continue</span>;<br><br>        <span class="hljs-comment">/// 记录当前这本书的分配情况</span><br>        assign_state next_state = state; <span class="hljs-comment">/// 初始化新的状态变量</span><br>        next_state.assigned[book] = reader;<br><br>        <span class="hljs-comment">/// 从下一位读者开始，求解分配剩余书籍的所有方案</span><br>        <span class="hljs-built_in">Try</span>(reader + <span class="hljs-number">1</span>, next_state); <span class="hljs-comment">/// 不需要回溯了!  开启平行宇宙！</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    num = <span class="hljs-number">0</span>; <span class="hljs-comment">// 分书方案数初始值</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> book = <span class="hljs-number">0</span>; book &lt; <span class="hljs-number">5</span>; book++)<br>        state.assigned[book] = <span class="hljs-number">-1</span>;<br>    <span class="hljs-built_in">Try</span>(<span class="hljs-number">0</span>, state); <span class="hljs-comment">// 从第0个人（A）开始分书</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题4：<br>
在国际象棋的棋盘上，放置8个皇后（棋子），使皇后两两之间互不攻击。</p>
<p>自然可以采用暴力算法（利用<code>next_permutation</code>全排列）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">CanAttack</span><span class="hljs-params">(<span class="hljs-type">int</span> q[<span class="hljs-number">9</span>], <span class="hljs-type">int</span> pos1, <span class="hljs-type">int</span> pos2)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(pos1 - pos2) == <span class="hljs-built_in">abs</span>(q[pos1] - q[pos2]))<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">IsSafe</span><span class="hljs-params">(<span class="hljs-type">int</span> q[<span class="hljs-number">9</span>])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= <span class="hljs-number">8</span>; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= i - <span class="hljs-number">1</span>; j++)<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">CanAttack</span>(q, i, j))<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> q[<span class="hljs-number">9</span>], num = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">// int q = &#123;0, 1, 2, 3, 4, 5, 6, 7, 8&#125;;</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">8</span>; i++)<br>        q[i] = i;<br>    <span class="hljs-keyword">do</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsSafe</span>(q))<br>        &#123;<br>            num++;<br>            cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot;: &quot;</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">8</span>; i++)<br>                cout &lt;&lt; q[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>            cout &lt;&lt; endl;<br>        &#125;<br>    &#125; <span class="hljs-keyword">while</span> (<span class="hljs-built_in">next_permutation</span>(q + <span class="hljs-number">1</span>, q + <span class="hljs-number">9</span>));<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>枚举+递归解法（回溯）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> Num;        <span class="hljs-comment">// 方案数</span><br><span class="hljs-type">int</span> Q[<span class="hljs-number">9</span>];       <span class="hljs-comment">// 8个皇后所占用的行号</span><br><span class="hljs-type">bool</span> S[<span class="hljs-number">9</span>];      <span class="hljs-comment">// S[1]~S[8]，当前行是否安全</span><br><span class="hljs-type">bool</span> L[<span class="hljs-number">17</span>];     <span class="hljs-comment">// L[2]~L[16]，(i-j)对角线是否安全</span><br><span class="hljs-type">bool</span> R[<span class="hljs-number">17</span>];     <span class="hljs-comment">// R[2]~R[16]，(i+j)对角线是否安全</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> OFFSET = <span class="hljs-number">9</span>;    <span class="hljs-comment">// 用来统一数组下标范围[2,3,...,16]</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Try</span><span class="hljs-params">(<span class="hljs-type">int</span> col)</span> </span>&#123;<br>    <span class="hljs-comment">/// 递归中止条件：所有列均已放上皇后了</span><br>    <span class="hljs-keyword">if</span> (col == <span class="hljs-number">9</span>) &#123;<br>        Num++;<br><br>        cout &lt;&lt; <span class="hljs-string">&quot;方案&quot;</span> &lt;&lt; Num &lt;&lt; <span class="hljs-string">&quot;：&quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= <span class="hljs-number">8</span>; k++) cout &lt;&lt; Q[k] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        cout &lt;&lt; endl;<br><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/// 依次尝试当前列的 8 行位置</span><br>        <span class="hljs-comment">/// 依次尝试当前列的 8 行位置</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> row = <span class="hljs-number">1</span>; row &lt;= <span class="hljs-number">8</span>; row++) &#123;<br>        <span class="hljs-comment">/// 判断拟放置皇后的位置是否安全</span><br>        <span class="hljs-keyword">if</span> (!S[row] || !R[col + row] ||<br>            !L[col - row + OFFSET]) <span class="hljs-keyword">continue</span>;<br><br>        <span class="hljs-comment">/// 记录位置信息（行号)</span><br>        Q[col] = row;<br><br>        <span class="hljs-comment">/// 修改三个方向的安全性标记</span><br>        S[row] = <span class="hljs-literal">false</span>;<br>        L[col - row + OFFSET] = <span class="hljs-literal">false</span>;<br>        R[col + row] = <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-comment">/// 递归尝试放下一列</span><br>        <span class="hljs-built_in">Try</span>(col + <span class="hljs-number">1</span>);<br><br>        <span class="hljs-comment">/// 回溯：恢复三个方向原有安全性</span><br>        S[row] = <span class="hljs-literal">true</span>;<br>        L[col - row + OFFSET] = <span class="hljs-literal">true</span>;<br>        R[col + row] = <span class="hljs-literal">true</span>;<br>    &#125;<br><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Num = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++)  S[i] = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">17</span>; i++) L[i] = R[i] = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-built_in">Try</span>(<span class="hljs-number">1</span>);     <span class="hljs-comment">/// 从第1列开始放皇后</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>枚举+递归解法（不回溯）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> Num;        <span class="hljs-comment">// 方案数</span><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">place_state</span> &#123;<br>    <span class="hljs-type">int</span> Q[<span class="hljs-number">9</span>];           <span class="hljs-comment">// 8个皇后所占用的行号</span><br>    <span class="hljs-type">bool</span> S[<span class="hljs-number">9</span>];          <span class="hljs-comment">// S[1]~S[8]，当前行是否安全</span><br>    <span class="hljs-type">bool</span> L[<span class="hljs-number">17</span>];         <span class="hljs-comment">// L[2]~L[16]，(i-j)对角线是否安全</span><br>    <span class="hljs-type">bool</span> R[<span class="hljs-number">17</span>];         <span class="hljs-comment">// R[2]~R[16]，(i+j)对角线是否安全</span><br>&#125;;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> OFFSET = <span class="hljs-number">9</span>;   <span class="hljs-comment">// 调整一三象限对角线数组的下标范围</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Try</span><span class="hljs-params">(<span class="hljs-type">int</span> col, place_state state)</span> </span>&#123;<br><br>    <span class="hljs-comment">/// 递归中止条件：所有列均已放上皇后了</span><br>    <span class="hljs-keyword">if</span> (col == <span class="hljs-number">9</span>) &#123;<br>        Num++;<br><br>        cout &lt;&lt; <span class="hljs-string">&quot;方案&quot;</span> &lt;&lt; Num &lt;&lt; <span class="hljs-string">&quot;：&quot;</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= <span class="hljs-number">8</span>; k++) cout &lt;&lt; state.Q[k] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        cout &lt;&lt; endl;<br><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-comment">/// 依次尝试当前列的 8 行位置</span><br>        <span class="hljs-comment">/// 依次尝试当前列的 8 行位置</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> row = <span class="hljs-number">1</span>; row &lt;= <span class="hljs-number">8</span>; row++) &#123;<br>        <span class="hljs-comment">/// 判断拟放置皇后的位置是否安全</span><br>        <span class="hljs-keyword">if</span> (!state.S[row] ||<br>            !state.R[col + row] || !state.L[col - row + OFFSET]) <span class="hljs-keyword">continue</span>;<br><br>        <span class="hljs-comment">/// 记录位置信息（行号）</span><br>        place_state next_state = state;<br>        next_state.Q[col] = row;<br><br>        <span class="hljs-comment">/// 修改三个方向的安全性标记</span><br>        next_state.S[row] = <span class="hljs-literal">false</span>;<br>        next_state.L[col - row + OFFSET] = <span class="hljs-literal">false</span>;<br>        next_state.R[col + row] = <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-comment">/// 从下一列开始放置剩余皇后：递归【同性质问题】</span><br>        <span class="hljs-built_in">Try</span>(col + <span class="hljs-number">1</span>, next_state); <span class="hljs-comment">/// next_state可视为问题的初始设置</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    place_state state;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">9</span>; i++)  state.S[i] = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">17</span>; i++) state.L[i] = state.R[i] = <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-built_in">Try</span>(<span class="hljs-number">1</span>,state);     <span class="hljs-comment">/// 从第1列开始放皇后</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="9-动态规划">9.动态规划</h2>
<h3 id="实例9">实例9</h3>
<p>问题1：<br>
编写一个程序，在一个给定的数字串中插入 K 个乘号，使总的乘积最大。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> s = <span class="hljs-number">3215125</span>; <span class="hljs-comment">/// 示例数据</span><br><span class="hljs-type">int</span> D[<span class="hljs-number">7</span>][<span class="hljs-number">7</span>] = &#123;<span class="hljs-number">0</span>&#125;;     <span class="hljs-comment">/// 大小与示例数据有关</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitD</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    D[<span class="hljs-number">0</span>][<span class="hljs-number">6</span>] = s;<br>    <span class="hljs-type">int</span> s1 = <span class="hljs-number">1000000</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">6</span>; i++)<br>    &#123;<br>        D[i][<span class="hljs-number">6</span>] = D[i - <span class="hljs-number">1</span>][<span class="hljs-number">6</span>] % s1;<br>        s1 = s1 / <span class="hljs-number">10</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">6</span>; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">5</span>; j &gt;= i; j--)<br>            D[i][j] = D[i][j + <span class="hljs-number">1</span>] / <span class="hljs-number">10</span>;<br>&#125;<br><br><span class="hljs-type">int</span> Q[<span class="hljs-number">7</span>][<span class="hljs-number">7</span>][<span class="hljs-number">3</span>] = &#123;<span class="hljs-number">0</span>&#125;; <span class="hljs-comment">/// 大小与示例数据有关</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">P</span><span class="hljs-params">(<span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right, <span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (k == <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> D[left][right];<br>    <span class="hljs-type">int</span> max = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (Q[left][right][k] == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = left; i &lt;= right - k; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> x = D[left][i] * <span class="hljs-built_in">P</span>(i + <span class="hljs-number">1</span>, right, k - <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">if</span> (x &gt; Q[left][right][k])<br>                max = x;<br>        &#125;<br>        Q[left][right][k] = max;<br>    &#125;<br>    <span class="hljs-keyword">return</span> Q[left][right][k];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">InitD</span>();<br>    cout &lt;&lt; <span class="hljs-built_in">P</span>(<span class="hljs-number">0</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题2：<br>
某公司购买长钢条，将它切割为若干短钢条后再出售。下表是公司制定的不同长度钢条价格表。假定切割工序是没有成本支出的，希望给出最佳的切割方案。<br>
（给定一段长为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 的钢条和一个价格表 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">p(i), i = 1, 2, 3, ..., n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span></span></span></span>，求切割钢条的最佳方案，使得销售收益 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 最大。）</p>
<p>方法一：枚举+递归算法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">17</span>, <span class="hljs-number">17</span>, <span class="hljs-number">20</span>, <span class="hljs-number">24</span>, <span class="hljs-number">30</span>&#125;; <span class="hljs-comment">/// 价格表示例</span><br><span class="hljs-type">int</span> r[<span class="hljs-number">11</span>] = &#123;<span class="hljs-number">0</span>&#125;;                                         <span class="hljs-comment">/// 示例数据最长为10</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">cut</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (r[n])<br>        <span class="hljs-keyword">return</span> r[n];<br>    <span class="hljs-type">int</span> max = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> val = p[i] + <span class="hljs-built_in">cut</span>(n - i);<br>        <span class="hljs-keyword">if</span> (val &gt; max)<br>            max = val;<br>    &#125;<br>    <span class="hljs-keyword">return</span> r[n] = max;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-built_in">cut</span>(<span class="hljs-number">7</span>) &lt;&lt; endl; <span class="hljs-comment">/// 7为测试示例长度</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>方法二：枚举+递推算法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">17</span>, <span class="hljs-number">17</span>, <span class="hljs-number">20</span>, <span class="hljs-number">24</span>, <span class="hljs-number">30</span>&#125;;<br><span class="hljs-type">int</span> r[<span class="hljs-number">11</span>] = &#123;<span class="hljs-number">0</span>&#125;; <span class="hljs-comment">/// 示例数据最长为10</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">cut</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>    &#123;<br>        <span class="hljs-type">int</span> max = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= j; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> val = r[j - i] + p[i];<br>            <span class="hljs-keyword">if</span> (val &gt; max)<br>                max = val;<br>        &#125;<br>        r[j] = max; <span class="hljs-comment">// 长度j的最佳方案</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> r[n]; <span class="hljs-comment">/// 从1递推到n求出的结果</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-built_in">cut</span>(<span class="hljs-number">7</span>) &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>问题3：<br>
P是出发点，从P到A，求最短路径。要求：只能向上或向右前进。</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs makefile">G 3 D 1 B 2 A<br>1   2   2   3<br>K 3 H 4 E 5 C<br>4   1   2   4<br>N 2 L 1 I 4 F<br>2   2   3   4<br>P 3 O 2 M 3 J<br></code></pre></td></tr></table></figure>
<p>采用递推求解</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">min</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (a &lt;= b)<br>        <span class="hljs-keyword">return</span> a;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> b;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">const</span> <span class="hljs-type">int</span> h[<span class="hljs-number">4</span>][<span class="hljs-number">3</span>] = &#123;&#123;<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>&#125;, &#123;<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;, &#123;<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;&#125;; <span class="hljs-comment">// 水平方向上的道路距离</span><br>    <span class="hljs-type">const</span> <span class="hljs-type">int</span> v[<span class="hljs-number">3</span>][<span class="hljs-number">4</span>] = &#123;&#123;<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>&#125;, &#123;<span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>&#125;, &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;&#125;;   <span class="hljs-comment">// 垂直方向上的道路距离</span><br>    <span class="hljs-type">int</span> p[<span class="hljs-number">4</span>][<span class="hljs-number">4</span>] = &#123;&#123;<span class="hljs-number">0</span>&#125;&#125;;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt; <span class="hljs-number">4</span>; j++) <span class="hljs-comment">// 纵轴上的点</span><br>        p[<span class="hljs-number">0</span>][j] = p[<span class="hljs-number">0</span>][j - <span class="hljs-number">1</span>] + h[<span class="hljs-number">0</span>][j - <span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">4</span>; i++) <span class="hljs-comment">// 横轴上的点</span><br>        p[i][<span class="hljs-number">0</span>] = p[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>] + v[i - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">4</span>; i++) <span class="hljs-comment">// 内部的点</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt; <span class="hljs-number">4</span>; j++)<br>            p[i][j] = <span class="hljs-built_in">min</span>((p[i - <span class="hljs-number">1</span>][j] + v[i - <span class="hljs-number">1</span>][j]),<br>                          (p[i][j - <span class="hljs-number">1</span>] + h[i][j - <span class="hljs-number">1</span>]));<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;from P to A is &quot;</span> &lt;&lt; p[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>] &lt;&lt; endl;<br>    <span class="hljs-comment">// 输出每个路口对P点的最小距离</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">3</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= <span class="hljs-number">3</span>; j++)<br>            cout &lt;&lt; p[i][j] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        cout &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>11-6<br>
问题4：<br>
给定n个矩阵的序列（矩阵链）<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">A_1, A_2, ..., A_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，其中矩阵<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">A_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的大小为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>×</mo><msub><mi>P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">P_{i-1} \times P_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<br>
在计算它们的乘积<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mn>1</mn><mi>A</mi><mn>2...</mn><mi>A</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">A1A2...An</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mord">1</span><span class="mord mathnormal">A</span><span class="mord">2...</span><span class="mord mathnormal">A</span><span class="mord mathnormal">n</span></span></span></span>时，可以用括号来明确计算次序。因为矩阵运算满足结合律，所以任何一种加括号的方法都能得到相同的计算结果。然而，不同的加括号方法，对乘积运算的代价（标量乘法的次数）所产生的影响却是不同的。<br>
请编程求解最优的加括号方案，使得通过添加括号明确计算次序后，矩阵链乘法所需的标量乘法次数最少。<br>
注意：因为要求有明确的计算次序，所以各个矩阵乘法运算都要求有括号。</p>
<p>采用递推求解，递推输出</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> p[<span class="hljs-number">100</span>] = &#123;<span class="hljs-number">30</span>, <span class="hljs-number">35</span>, <span class="hljs-number">15</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">25</span>&#125;;<br><span class="hljs-type">int</span> n = <span class="hljs-number">6</span>; <span class="hljs-comment">/// 矩阵数量, n&lt;100</span><br><span class="hljs-comment">/// 最小代价为m[i][j]，最佳分割点s[i][j]保存最优值m[i][j]对应的分割点</span><br><span class="hljs-type">int</span> m[<span class="hljs-number">100</span>][<span class="hljs-number">100</span>], s[<span class="hljs-number">100</span>][<span class="hljs-number">100</span>];<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">matrix_chain</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        m[i][i] = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">/// 子矩阵链从短到长逐步增长，递推求解最优计算代价</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> len = <span class="hljs-number">2</span>; len &lt;= n; len++)<br>    &#123; <span class="hljs-comment">/// len是矩阵链的长度</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n - len + <span class="hljs-number">1</span>; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> j = i + len - <span class="hljs-number">1</span>; <span class="hljs-comment">/// 满足子矩阵链长度为len要求</span><br><br>            m[i][j] = <span class="hljs-number">100000</span>; <span class="hljs-comment">/// 初始值</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = i; k &lt; j; k++)<br>            &#123;<br>                <span class="hljs-type">int</span> q = m[i][k] + m[k + <span class="hljs-number">1</span>][j] + p[i - <span class="hljs-number">1</span>] * p[k] * p[j];<br>                <span class="hljs-keyword">if</span> (q &lt; m[i][j])<br>                &#123;<br>                    m[i][j] = q;<br>                    s[i][j] = k; <span class="hljs-comment">/// 保存最佳分割点 k</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/// 递归输出括号方案</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_optimal_parens</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (i == j) <span class="hljs-comment">/// 若只有一个矩阵，则不加括号，直接显示</span><br>        cout &lt;&lt; <span class="hljs-string">&#x27;A&#x27;</span> &lt;&lt; i;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&#x27;(&#x27;</span>;                          <span class="hljs-comment">/// 若有多个矩阵，则需要加括号</span><br>        <span class="hljs-built_in">print_optimal_parens</span>(i, s[i][j]);     <span class="hljs-comment">/// i..k</span><br>        <span class="hljs-built_in">print_optimal_parens</span>(s[i][j] + <span class="hljs-number">1</span>, j); <span class="hljs-comment">/// k+1..j</span><br>        cout &lt;&lt; <span class="hljs-string">&#x27;)&#x27;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">matrix_chain</span>();<br>    <span class="hljs-built_in">print_optimal_parens</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>); <span class="hljs-comment">/// A1 A2 ... A6</span><br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="10-多步决策">10.多步决策</h2>
<h3 id="实例10">实例10</h3>
<p>问题1：<br>
目标：将东岸的3人3鬼通过一只小船安全转移到西岸，希望摆渡次数尽可能少。<br>
任务：编写程序，求出一种渡河方案。<br>
条件：<br>
船的容量有限，一次最多只能坐2人（或2鬼或1人1鬼）。<br>
无论是在河的东岸还是在河的西岸，一旦鬼数多于人数，则人将被鬼吃掉。<br>
怎样渡河的大权掌握在人的手中。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">// 定义描述渡河状态东岸人数与鬼数的结构类型。R: 状态中的人数, G: 状态中的鬼数</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">state</span><br>&#123;<br>    <span class="hljs-type">int</span> R, G;<br>&#125;;<br><br>state s[<span class="hljs-number">20</span>];     <span class="hljs-comment">// 结构数组：记录渡河时的状态转移过程</span><br><span class="hljs-type">int</span> d[<span class="hljs-number">20</span>] = &#123;<span class="hljs-number">0</span>&#125;; <span class="hljs-comment">// 整数数组：记录状态转移过程决策号（1-5），元素设初值0，表示“决策待定”</span><br><span class="hljs-type">int</span> k;           <span class="hljs-comment">// 当前状态号，从1开始编号</span><br><br><span class="hljs-comment">// 摆渡策略(数组)</span><br>state op[<span class="hljs-number">6</span>] = &#123;&#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;, <span class="hljs-comment">// 不使用0下标元素，设置为全零。</span><br>               &#123;<span class="hljs-number">2</span>, <span class="hljs-number">0</span>&#125;,<br>               &#123;<span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;,<br>               &#123;<span class="hljs-number">1</span>, <span class="hljs-number">1</span>&#125;,<br>               &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;,<br>               &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>&#125;&#125;; <span class="hljs-comment">// 摆渡策略从下标1开始</span><br><br><span class="hljs-comment">// 渡河状态转移函数</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">transfer_state</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    k = <span class="hljs-number">1</span>;      <span class="hljs-comment">// 当前状态编号，1表示初始状态</span><br>    s[<span class="hljs-number">1</span>].R = <span class="hljs-number">3</span>; <span class="hljs-comment">// 初始状态时东岸有3人</span><br>    s[<span class="hljs-number">1</span>].G = <span class="hljs-number">3</span>; <span class="hljs-comment">// 初始状态时东岸有3鬼</span><br>    <span class="hljs-type">int</span> fx;     <span class="hljs-comment">// 摆渡方向，-1为东向西，1为西向东</span><br><br>    <span class="hljs-keyword">do</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (k % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>)<br>            fx = <span class="hljs-number">-1</span>; <span class="hljs-comment">// 若k为奇数，表明是从东岸到西岸摆渡</span><br>        <span class="hljs-keyword">else</span><br>            fx = <span class="hljs-number">1</span>; <span class="hljs-comment">// 若k为偶数，表明是从西岸到东岸摆渡</span><br>        <span class="hljs-type">int</span> i;      <span class="hljs-comment">// 决策号</span><br>        <span class="hljs-comment">/// 从当前状态出发，依次尝试所有状态转移决策（决策号从1到5）</span><br>        <span class="hljs-keyword">for</span> (i = d[k] + <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++)<br>        &#123;                                  <span class="hljs-comment">// 试探采用哪个决策能安全地从状态k出发到下一状态</span><br>            <span class="hljs-type">int</span> u = s[k].R + fx * op[i].R; <span class="hljs-comment">// 按第i号策略走1步之后，东岸的人数</span><br>            <span class="hljs-type">int</span> v = s[k].G + fx * op[i].G; <span class="hljs-comment">// 按第i号策略走1步之后，东岸的鬼数</span><br><br>            <span class="hljs-keyword">if</span> (u &gt; <span class="hljs-number">3</span> || v &gt; <span class="hljs-number">3</span> || u &lt; <span class="hljs-number">0</span> || v &lt; <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">continue</span>;                               <span class="hljs-comment">//(1) 越界，舍弃当前决策</span><br>            <span class="hljs-type">bool</span> AQ = (u == <span class="hljs-number">3</span>) || (u == <span class="hljs-number">0</span>) || (u == v); <span class="hljs-comment">// 判断是否安全</span><br>            <span class="hljs-keyword">if</span> (!AQ)<br>                <span class="hljs-keyword">continue</span>; <span class="hljs-comment">//(2) 不安全，舍弃当前决策</span><br><br>            <span class="hljs-type">bool</span> CHF = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 判断选用当前摆渡策略后到达的“新状态”是否重复？</span><br>            <span class="hljs-comment">// 查历史信息（倒序），只应考虑摆渡方向一致的状态（状态号间隔为2）</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = k - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">1</span>; j -= <span class="hljs-number">2</span>) <span class="hljs-comment">// (u, v)对应状态s[k+1]</span><br>                <span class="hljs-keyword">if</span> (s[j].R == u &amp;&amp; s[j].G == v)<br>                    CHF = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 若人鬼数一致，则是重复状态</span><br>            <span class="hljs-keyword">if</span> (CHF)<br>                <span class="hljs-keyword">continue</span>; <span class="hljs-comment">//(3) 重复，则舍弃当前决策i，继续(continue)尝试下一决策</span><br><br>            d[k] = i; <span class="hljs-comment">// 记录从当前状态k转移到下一状态k+1所选择的摆渡决策号</span><br>            k++;      <span class="hljs-comment">// 按策略渡河，状态号加1（变更为下一状态了）</span><br>            s[k].R = u;<br>            s[k].G = v;<br><br>            <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 已找到一个决策，跳出(break)FOR循环，**暂停**尝试其他策略</span><br>        &#125;<br><br>        <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">5</span>)<br>            d[k--] = <span class="hljs-number">0</span>; <span class="hljs-comment">// 决策都失败了，改当前状态为未决策，退回前一状态</span><br>    &#125; <span class="hljs-keyword">while</span> (!(s[k].R == <span class="hljs-number">0</span> &amp;&amp; s[k].G == <span class="hljs-number">0</span>)); <span class="hljs-comment">// 目标是东岸既无人又无鬼</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">display</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= k; i++)<br>        cout &lt;&lt; <span class="hljs-built_in">setw</span>(<span class="hljs-number">2</span>) &lt;&lt; i<br>             &lt;&lt; <span class="hljs-string">&quot;: (&quot;</span> &lt;&lt; s[i].R &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; s[i].G &lt;&lt; <span class="hljs-string">&quot;)&quot;</span>        <span class="hljs-comment">/// 状态内容</span><br>             &lt;&lt; <span class="hljs-string">&quot; choice = &quot;</span> &lt;&lt; d[i]                           <span class="hljs-comment">/// 决策号</span><br>             &lt;&lt; <span class="hljs-string">&quot; &#123;&quot;</span> &lt;&lt; op[d[i]].R &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; op[d[i]].G &lt;&lt; <span class="hljs-string">&quot;&#125;&quot;</span> <span class="hljs-comment">/// 决策内容</span><br>             &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">transfer_state</span>();<br>    <span class="hljs-built_in">display</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在上一问基础上，我们进一步优化程序，求出所有的渡河方案，没有多余的重复步骤。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">position</span><br>&#123;<br>    <span class="hljs-type">int</span> x, y;<br>&#125;;<br><br><span class="hljs-comment">// 不同决策对应的状态坐标变化</span><br>position dxy[] = &#123;&#123;<span class="hljs-number">1</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-number">2</span>, <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;, &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>&#125;&#125;;<br><br><span class="hljs-comment">// 起始状态，结束状态</span><br>position start_pos = &#123;<span class="hljs-number">3</span>, <span class="hljs-number">3</span>&#125;, goal_pos = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br><br><span class="hljs-comment">// 决策序列的记录</span><br>position path[<span class="hljs-number">100</span>];<br><span class="hljs-type">int</span> num; <span class="hljs-comment">// 总的方案数</span><br><br><span class="hljs-comment">/// 记录出现次数，防止重复!!!</span><br><span class="hljs-type">int</span> pos_cnt[<span class="hljs-number">2</span>][<span class="hljs-number">4</span>][<span class="hljs-number">4</span>] = &#123;&#123;&#123;<span class="hljs-number">0</span>&#125;&#125;&#125;;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">IsEq</span><span class="hljs-params">(position pos1, position pos2)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> (pos<span class="hljs-number">1.</span>x == pos<span class="hljs-number">2.</span>x) &amp;&amp; (pos<span class="hljs-number">1.</span>y == pos<span class="hljs-number">2.</span>y);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">IsDone</span><span class="hljs-params">(position pos)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">IsEq</span>(pos, goal_pos);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">IsValid</span><span class="hljs-params">(position pos, <span class="hljs-type">int</span> step)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">bool</span> v, s, r;<br>    <span class="hljs-type">int</span> dir = step % <span class="hljs-number">2</span>; <span class="hljs-comment">/// 0: from left to right; 1: from right to left</span><br><br>    <span class="hljs-comment">/// 1. 合法性检查</span><br>    v = (pos.x &gt;= <span class="hljs-number">0</span>) &amp;&amp; (pos.x &lt;= <span class="hljs-number">3</span>) &amp;&amp; (pos.y &gt;= <span class="hljs-number">0</span>) &amp;&amp; (pos.y &lt;= <span class="hljs-number">3</span>);<br><br>    <span class="hljs-comment">/// 2. 安全性检查</span><br>    s = (pos.x == pos.y || pos.x == <span class="hljs-number">0</span> || pos.x == <span class="hljs-number">3</span>); <span class="hljs-comment">/// 根据游戏规则推导出来</span><br><br>    <span class="hljs-comment">/// 3. 重复性检查</span><br>    r = pos_cnt[dir][pos.x][pos.y] == <span class="hljs-number">0</span>; <span class="hljs-comment">/// 根据算法特点推导出来的</span><br><br>    <span class="hljs-keyword">return</span> v &amp;&amp; s &amp;&amp; r;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetCount</span><span class="hljs-params">(position pos, <span class="hljs-type">int</span> step, <span class="hljs-type">int</span> cnt)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> dir = step % <span class="hljs-number">2</span>; <span class="hljs-comment">/// 0: from East to West; 1: from West to East</span><br>    pos_cnt[dir][pos.x][pos.y] = cnt;<br>&#125;<br><br><span class="hljs-function">position <span class="hljs-title">GetNewPos</span><span class="hljs-params">(position pos, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> step)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> dir = (step % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) ? <span class="hljs-number">-1</span> : <span class="hljs-number">1</span>; <span class="hljs-comment">/// 次序决定方向，方向决定加减 !!!</span><br>    <span class="hljs-comment">/// 通过引入方向变量，使下面的新坐标计算公式成为通用的，对两个方向均适用【代数思维】</span><br>    position next_pos = &#123;pos.x + dir * dxy[k].x, pos.y + dir * dxy[k].y&#125;;<br>    <span class="hljs-keyword">return</span> next_pos;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LogStep</span><span class="hljs-params">(position pos, <span class="hljs-type">int</span> step)</span></span><br><span class="hljs-function"></span>&#123;<br>    path[step] = pos;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OutStep</span><span class="hljs-params">(position pos)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;(&quot;</span> &lt;&lt; pos.x &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; pos.y &lt;&lt; <span class="hljs-string">&quot;) &quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OutAll</span><span class="hljs-params">(<span class="hljs-type">int</span> step)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= step; i++)<br>        <span class="hljs-built_in">OutStep</span>(path[i]);<br>    cout &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Jump</span><span class="hljs-params">(position pos, <span class="hljs-type">int</span> step)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsDone</span>(pos))<br>    &#123;          <span class="hljs-comment">// 是否到达目标？</span><br>        num++; <span class="hljs-comment">// 方案数加1</span><br>        cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot;: &quot;</span>;<br>        <span class="hljs-built_in">OutAll</span>(step); <span class="hljs-comment">// 输出方案</span><br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// 遍历N种方案</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-built_in">sizeof</span>(dxy) / <span class="hljs-built_in">sizeof</span>(dxy[<span class="hljs-number">0</span>]); k++)<br>    &#123;<br>        position next_pos = <span class="hljs-built_in">GetNewPos</span>(pos, k, step);<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">IsValid</span>(next_pos, step + <span class="hljs-number">1</span>))<br>            <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// next_pos是否可行？</span><br><br>        <span class="hljs-built_in">SetCount</span>(next_pos, step + <span class="hljs-number">1</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// 设置次数!!!</span><br>        <span class="hljs-built_in">LogStep</span>(next_pos, step + <span class="hljs-number">1</span>);     <span class="hljs-comment">// 记录方案</span><br>        <span class="hljs-built_in">Jump</span>(next_pos, step + <span class="hljs-number">1</span>);        <span class="hljs-comment">// 走下一步</span><br>        <span class="hljs-built_in">SetCount</span>(next_pos, step + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// 清除次数!!!（回溯）</span><br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    num = <span class="hljs-number">0</span>;                   <span class="hljs-comment">// 初始方案数置0</span><br>    <span class="hljs-built_in">SetCount</span>(start_pos, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">// 起点，第0步，第1次（到达）</span><br>    <span class="hljs-built_in">LogStep</span>(start_pos, <span class="hljs-number">0</span>);     <span class="hljs-comment">// 记录起点</span><br>    <span class="hljs-built_in">Jump</span>(start_pos, <span class="hljs-number">0</span>);        <span class="hljs-comment">// 从起点出发，走第0步</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%AC%94%E8%AE%B0/" class="category-chain-item">笔记</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" class="print-no-link">#程序设计</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>程序设计基础笔记</div>
      <div>http://imtdof.github.io/2024/10/31/程序设计基础笔记/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>UncleBob</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年10月31日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/11/03/%E5%A4%A7%E5%AD%A6%E7%89%A9%E7%90%86%EF%BC%882%EF%BC%89%E7%AC%94%E8%AE%B0-%E7%94%B5%E7%A3%81%E5%AD%A6/" title="大学物理（2）笔记-电磁学">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">大学物理（2）笔记-电磁学</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/10/29/ODE%E7%AC%94%E8%AE%B0-%E4%B8%80%E9%98%B6ODE/" title="ODE笔记-一阶ODE">
                        <span class="hidden-mobile">ODE笔记-一阶ODE</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
